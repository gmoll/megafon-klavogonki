window.BL_Klavogonki=window.BL_Klavogonki||{},function(){var t;(t=BL_Klavogonki).production=!0,t.log=function(){},t.warn=function(){}}.call(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}var e=setTimeout;function i(){}function r(t){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function o(n,i){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,r._immediateFn(function(){var t=1===n._state?i.onFulfilled:i.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(t){return void a(i.promise,t)}s(i.promise,e)}else(1===n._state?s:a)(i.promise,n._value)})):n._deferreds.push(i)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void u((i=n,o=t,function(){i.apply(o,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){a(e,t)}var i,o}function a(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)o(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function u(t,e){var n=!1;try{t(function(t){n||(n=!0,s(e,t))},function(t){n||(n=!0,a(e,t))})}catch(t){if(n)return;n=!0,a(e,t)}}r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=new this.constructor(i);return o(this,new c(t,e,n)),n},r.prototype.finally=t,r.all=function(e){return new r(function(i,o){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return i([]);var s=r.length;function a(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){a(e,t)},o)}r[e]=t,0==--s&&i(r)}catch(t){o(t)}}for(var t=0;t<r.length;t++)a(t,r[t])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(n){return new r(function(t,e){e(n)})},r.race=function(o){return new r(function(t,e){for(var n=0,i=o.length;n<i;n++)o[n].then(t,e)})},r._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){e(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in n?n.Promise.prototype.finally||(n.Promise.prototype.finally=t):n.Promise=r}),function(){function o(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function y(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function w(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+e+";"}function r(t){var e=t.a.offsetWidth,n=e+100;return t.f.style.width=n+"px",t.c.scrollLeft=n,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function k(t,e){function n(){var t=i;r(t)&&t.a.parentNode&&e(t.g)}var i=t;o(t.b,n),o(t.c,n),r(t)}function t(t,e){var n=e||{};this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var _=null,i=null,n=null,e=null;function s(){return null===e&&(e=!!document.fonts),e}function x(t,e){return[t.style,t.weight,function(){if(null===n){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}n=""!==t.style.font}return n}()?t.stretch:"","100px",e].join(" ")}t.prototype.load=function(t,e){var f=this,g=t||"BESbswy",v=0,m=e||3e3,b=(new Date).getTime();return new Promise(function(p,d){if(s()&&!function(){if(null===i)if(s()&&/Apple/.test(window.navigator.vendor)){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);i=!!t&&parseInt(t[1],10)<603}else i=!1;return i}()){var t=new Promise(function(n,t){!function e(){(new Date).getTime()-b>=m?t():document.fonts.load(x(f,'"'+f.family+'"'),g).then(function(t){1<=t.length?n():setTimeout(e,25)},function(){t()})}()}),e=new Promise(function(t,e){v=setTimeout(e,m)});Promise.race([e,t]).then(function(){clearTimeout(v),p(f)},function(){d(f)})}else n=function(){function n(){var t;(t=-1!=s&&-1!=a||-1!=s&&-1!=l||-1!=a&&-1!=l)&&((t=s!=a&&s!=l&&a!=l)||(null===_&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),_=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)),t=_&&(s==e&&a==e&&l==e||s==c&&a==c&&l==c||s==u&&a==u&&l==u)),t=!t),t&&(h.parentNode&&h.parentNode.removeChild(h),clearTimeout(v),p(f))}var i=new y(g),o=new y(g),r=new y(g),s=-1,a=-1,l=-1,e=-1,c=-1,u=-1,h=document.createElement("div");h.dir="ltr",w(i,x(f,"sans-serif")),w(o,x(f,"serif")),w(r,x(f,"monospace")),h.appendChild(i.a),h.appendChild(o.a),h.appendChild(r.a),document.body.appendChild(h),e=i.a.offsetWidth,c=o.a.offsetWidth,u=r.a.offsetWidth,function t(){if((new Date).getTime()-b>=m)h.parentNode&&h.parentNode.removeChild(h),d(f);else{var e=document.hidden;!0!==e&&void 0!==e||(s=i.a.offsetWidth,a=o.a.offsetWidth,l=r.a.offsetWidth,n()),v=setTimeout(t,50)}}(),k(i,function(t){s=t,n()}),w(i,x(f,'"'+f.family+'",sans-serif')),k(o,function(t){a=t,n()}),w(o,x(f,'"'+f.family+'",serif')),k(r,function(t){l=t,n()}),w(r,x(f,'"'+f.family+'",monospace'))},document.body?n():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),n()}):document.attachEvent("onreadystatechange",function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),n())});var n})},"object"==typeof module?module.exports=t:(window.FontFaceObserver=t,window.FontFaceObserver.prototype.load=t.prototype.load)}(),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.axios=e():t.axios=e()}(BL_Klavogonki,function(){return function(n){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,o),e.loaded=!0,e.exports}return o.m=n,o.c=i,o.p="",o(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";var i=n(2),o=n(3),r=n(5),s=n(22);function a(t){var e=new r(t),n=o(r.prototype.request,e);return i.extend(n,r.prototype,e),i.extend(n,e),n}var l=a(n(11));l.Axios=r,l.create=function(t){return a(s(l.defaults,t))},l.Cancel=n(23),l.CancelToken=n(24),l.isCancel=n(10),l.all=function(t){return Promise.all(t)},l.spread=n(25),t.exports=l,t.exports.default=l},function(t,e,n){"use strict";var o=n(3),i=n(4),r=Object.prototype.toString;function s(t){return"[object Array]"===r.call(t)}function a(t){return null!==t&&"object"==typeof t}function l(t){return"[object Function]"===r.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),s(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===r.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===r.call(t)},isFile:function(t){return"[object File]"===r.call(t)},isBlob:function(t){return"[object Blob]"===r.call(t)},isFunction:l,isStream:function(t){return a(t)&&l(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function n(){var i={};function t(t,e){"object"==typeof i[e]&&"object"==typeof t?i[e]=n(i[e],t):i[e]=t}for(var e=0,o=arguments.length;e<o;e++)c(arguments[e],t);return i},deepMerge:function n(){var i={};function t(t,e){"object"==typeof i[e]&&"object"==typeof t?i[e]=n(i[e],t):i[e]="object"==typeof t?n({},t):t}for(var e=0,o=arguments.length;e<o;e++)c(arguments[e],t);return i},extend:function(n,t,i){return c(t,function(t,e){n[e]=i&&"function"==typeof t?o(t,i):t}),n},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e){"use strict";t.exports=function(n,i){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return n.apply(i,t)}}},function(t,e){t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e,n){"use strict";var o=n(2),i=n(6),r=n(7),s=n(8),a=n(22);function l(t){this.defaults=t,this.interceptors={request:new r,response:new r}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},l.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],function(n){l.prototype[n]=function(t,e){return this.request(o.merge(e||{},{method:n,url:t}))}}),o.forEach(["post","put","patch"],function(i){l.prototype[i]=function(t,e,n){return this.request(o.merge(n||{},{method:i,url:t,data:e}))}}),t.exports=l},function(t,e,n){"use strict";var r=n(2);function s(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(r.isURLSearchParams(e))i=e.toString();else{var o=[];r.forEach(e,function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(s(e)+"="+s(t))}))}),i=o.join("&")}return i&&(t+=(-1===t.indexOf("?")?"?":"&")+i),t}},function(t,e,n){"use strict";var i=n(2);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=o},function(t,e,n){"use strict";var i=n(2),o=n(9),r=n(10),s=n(11),a=n(20),l=n(21);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(e){return c(e),e.baseURL&&!a(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return c(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return r(t)||(c(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(t,e,n){"use strict";var i=n(2);t.exports=function(e,n,t){return i.forEach(t,function(t){e=t(e,n)}),e}},function(t,e){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var i=n(2),o=n(12),r={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,l={adapter:("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)?a=n(13):"undefined"!=typeof XMLHttpRequest&&(a=n(13)),a),transformRequest:[function(t,e){return o(e,"Accept"),o(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return 200<=t&&t<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){l.headers[t]={}}),i.forEach(["post","put","patch"],function(t){l.headers[t]=i.merge(r)}),t.exports=l},function(t,e,n){"use strict";var o=n(2);t.exports=function(n,i){o.forEach(n,function(t,e){e!==i&&e.toUpperCase()===i.toUpperCase()&&(n[i]=t,delete n[e])})}},function(t,e,u){"use strict";var h=u(2),p=u(14),d=u(6),f=u(17),g=u(18),v=u(15);t.exports=function(c){return new Promise(function(n,i){var o=c.data,r=c.headers;h.isFormData(o)&&delete r["Content-Type"];var s=new XMLHttpRequest;if(c.auth){var t=c.auth.username||"",e=c.auth.password||"";r.Authorization="Basic "+btoa(t+":"+e)}if(s.open(c.method.toUpperCase(),d(c.url,c.params,c.paramsSerializer),!0),s.timeout=c.timeout,s.onreadystatechange=function(){if(s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))){var t="getAllResponseHeaders"in s?f(s.getAllResponseHeaders()):null,e={data:c.responseType&&"text"!==c.responseType?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:t,config:c,request:s};p(n,i,e),s=null}},s.onabort=function(){s&&(i(v("Request aborted",c,"ECONNABORTED",s)),s=null)},s.onerror=function(){i(v("Network Error",c,null,s)),s=null},s.ontimeout=function(){i(v("timeout of "+c.timeout+"ms exceeded",c,"ECONNABORTED",s)),s=null},h.isStandardBrowserEnv()){var a=u(19),l=(c.withCredentials||g(c.url))&&c.xsrfCookieName?a.read(c.xsrfCookieName):void 0;l&&(r[c.xsrfHeaderName]=l)}if("setRequestHeader"in s&&h.forEach(r,function(t,e){void 0===o&&"content-type"===e.toLowerCase()?delete r[e]:s.setRequestHeader(e,t)}),c.withCredentials&&(s.withCredentials=!0),c.responseType)try{s.responseType=c.responseType}catch(t){if("json"!==c.responseType)throw t}"function"==typeof c.onDownloadProgress&&s.addEventListener("progress",c.onDownloadProgress),"function"==typeof c.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(t){s&&(s.abort(),i(t),s=null)}),void 0===o&&(o=null),s.send(o)})}},function(t,e,n){"use strict";var o=n(15);t.exports=function(t,e,n){var i=n.config.validateStatus;!i||i(n.status)?t(n):e(o("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(t,e,n){"use strict";var s=n(16);t.exports=function(t,e,n,i,o){var r=new Error(t);return s(r,e,n,i,o)}},function(t,e){"use strict";t.exports=function(t,e,n,i,o){return t.config=e,n&&(t.code=n),t.request=i,t.response=o,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,n){"use strict";var r=n(2),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,o={};return t&&r.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(o[e]&&0<=s.indexOf(e))return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}}),o}},function(t,e,n){"use strict";var s=n(2);t.exports=s.isStandardBrowserEnv()?function(){var n,i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function r(t){var e=t;return i&&(o.setAttribute("href",e),e=o.href),o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return n=r(window.location.href),function(t){var e=s.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0}},function(t,e,n){"use strict";var a=n(2);t.exports=a.isStandardBrowserEnv()?{write:function(t,e,n,i,o,r){var s=[];s.push(t+"="+encodeURIComponent(e)),a.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),a.isString(i)&&s.push("path="+i),a.isString(o)&&s.push("domain="+o),!0===r&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var o=n(2);t.exports=function(e,n){n=n||{};var i={};return o.forEach(["url","method","params","data"],function(t){void 0!==n[t]&&(i[t]=n[t])}),o.forEach(["headers","auth","proxy"],function(t){o.isObject(n[t])?i[t]=o.deepMerge(e[t],n[t]):void 0!==n[t]?i[t]=n[t]:o.isObject(e[t])?i[t]=o.deepMerge(e[t]):void 0!==e[t]&&(i[t]=e[t])}),o.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(t){void 0!==n[t]?i[t]=n[t]:void 0!==e[t]&&(i[t]=e[t])}),i}},function(t,e){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,n){"use strict";var i=n(23);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},t.exports=o},function(t,e){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}}])}),function(t,e){var n=function(t){"use strict";function e(e){return function(t){return typeof t===e}}function n(e){return function(t){return t instanceof e}}var s=e("object"),a=e("function"),r=e("string"),i=e("number"),o=e("boolean"),l=Array.isArray||n(Array),c=n(Date),u=n(RegExp),h=function(t){return t&&1===t.nodeType},p=function(t,e){if(!(e instanceof Function)){var n=e;e=function(t){return t===n}}for(var i=0,o=t.length;i<o;i++)if(e(t[i]))return{index:i,found:t[i]};return{index:-1}},d=Array.prototype.shift;function f(){for(var t,e=d.call(arguments),n=d.call(arguments);n;){if(typeof e!=typeof n&&(e=l(n)?[]:s(n)?{}:n),s(n))for(t in n)void 0!==n[t]&&(typeof e[t]!=typeof n[t]?e[t]=f(void 0,n[t]):l(e[t])?[].push.apply(e[t],n[t]):s(e[t])?e[t]=f(e[t],n[t]):e[t]=n[t]);n=d.call(arguments)}return e}function g(){for(var t,e=d.call(arguments),n=d.call(arguments);n;){for(t in n)e[t]=n[t];n=d.call(arguments)}return e}var v=function(t){if(t.matchesSelector)return"matchesSelector";if(t.webkitMatchesSelector)return"webkitMatchesSelector";if(t.mozMatchesSelector)return"mozMatchesSelector";if(t.msMatchesSelector)return"msMatchesSelector";if(t.oMatchesSelector)return"oMatchesSelector";throw new Error("your browser does not support matchesSelector")}(Element.prototype),m=document.createEvent?function(t,e,n,i){var o=document.createEvent("HTMLEvents");return o.data=i,o.args=n,o.initEvent(e,!0,!0),t.dispatchEvent(o),o}:function(t,e,n,i){var o=document.createEventObject();return o.data=i,o.args=n,t.fireEvent("on"+e,o),o},b=eval,y=document.createElement("div"),w=document.createElement("div"),k=!!y.classList;if(!y.addEventListener&&!document.body.attachEvent)throw"Browser not compatible with element events";var _=y.addEventListener?function(t,e,n){return t.addEventListener(e,n,!1)}:function(t,e,n){return t.attachEvent("on"+e,n)},x=y.removeEventListener?function(t,e,n){return t.removeEventListener(e,n,!1)}:function(t,e,n){return t.detachEvent("on"+e,n)};function E(t,e,n){if(void 0!==n){if(t.$$jqListeners&&t.$$jqListeners[e]){var i=p(t.$$jqListeners[e],function(t){return t.srcListener===n});i.found&&(t.$$jqListeners[e].splice(i.index,1),x(t,e,i.found))}}else if(t.$$jqListeners&&t.$$jqListeners[e]){for(var o=0,r=t.$$jqListeners[e].length;o<r;o++)x(t,e,t.$$jqListeners[e][o]);t.$$jqListeners[e]=[]}}function L(e,n,i,t){var o=t?function(t){i.apply(e,[t].concat(t.args)),E(e,n,i)}:function(t){i.apply(e,[t].concat(t.args))};o.srcListener=i,e.$$jqListeners=e.$$jqListeners||{},e.$$jqListeners[n]=e.$$jqListeners[n]||[],e.$$jqListeners[n].push(o),_(e,n,o)}function T(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n];return t.length+=i,t}var C=/^[a-z-_]$/i;function S(t,e){return r(t)?function(t,e){var n=t[0];{if("<"===n){y.innerHTML=t;var i=T(new j,y.children);return i}if(-1!==t.indexOf(" ")||-1!==t.indexOf(":"))return T(new j,e.querySelectorAll(t));if("#"===n){var o=e.getElementById(t.substr(1));if(o){var r=new j;return r[0]=o,r.length=1,r}return T(new j,e.querySelectorAll(t))}if("."===n)return T(new j,e.getElementsByClassName(t.substr(1)));if(C.test(t))return T(new j,e.getElementsByTagName(t))}return T(new j,e.querySelectorAll(t))}(t,e||document):function(t){{if(t instanceof j)return t;if(l(t)||t instanceof NodeList||t instanceof HTMLCollection)return T(new j,t);if(t===window||t===document||t instanceof HTMLElement||t instanceof Element||h(t)){var e=new j;return e[0]=t,e.length=1,e}if(a(t))H(t);else if(void 0===t)return new j}}(t)}S.noop=function(){},S.extend=function(t){var e=[].slice.call(arguments);o(t)?e.shift():t=!1,t?f.apply(null,e):g.apply(null,e)},S.isObject=s,S.isFunction=a,S.isString=r,S.isNumber=i,S.isBoolean=o,S.isArray=l,S.isDate=c,S.isRegExp=u,S.isElement=h;var $=S,A=window.addEventListener?function(t){window.addEventListener("load",t,!1)}:function(t){window.attachEvent("onload",t)};function H(t){a(t)&&(/loaded|complete/.test(document.readyState)?t():A(t))}function j(){}function W(t){if(t.length<=1)return t;for(var e=t.filter(function(){return!this.___found___&&(this.___found___=!0)}),n=0,i=e.length;n<i;n++)delete e[n].___found___;return e}S.ready=H,(j.prototype=Object.create(Array.prototype)).ready=H,j.prototype.extend=function(t){var e=[].slice.call(arguments);o(t)?e.shift():t=!1,t?f.apply(null,[j.prototype].concat(e)):g.apply(null,[j.prototype].concat(e))},S.fn=j.prototype,j.prototype.get=function(t){return t?this[t]:this},j.prototype.eq=function(t){if(!i(t))throw"number required";var e=t<0?this[this.length-t]:this[t],n=new j;return e&&(n[0]=e,n.length=1),n},j.prototype.first=function(){var t=new j;return this.length&&(t[0]=this[0],t.length=1),t},j.prototype.last=function(){var t=new j;return this.length&&(t[0]=this[this.length-1],t.length=1),t},j.prototype.$=j.prototype.find=function(t){var e,n,i,o,r,s=this,a=new j,l=0;if(!t)return s;for(/^\s*>/.test(t)&&(t=t.replace(/^\s*>\s*([^\s]*)\s*/,function(t,e){return s=s.children(e),""})),e=0,i=s.length;e<i;e++)for(r=s[e].querySelectorAll(t),n=0,o=r.length;n<o;n++)a[l++]=r[n];return a.length=l,W(a)},j.prototype.add=function(t,e){var n,i,o=S(t,e),r=this.length,s=new j;for(n=0,i=this.length;n<i;n++)s[n]=this[n];for(n=0,i=o.length;n<i;n++)s[r++]=o[n];return s.length=r,W(s)},j.prototype.each=function(t){if(a(t))for(var e=0,n=this.length;e<n;e++)t.call(this[e],e,this[e]);return this},j.prototype.empty=function(){for(var t,e,n=0,i=this.length;n<i;n++)for(t=this[n],e=t.firstChild;e;)t.removeChild(e),e=t.firstChild;return this},j.prototype.filter=function(t){var e,n,i,o=new j;if(a(t))for(n=0,i=this.length;n<i;n++)e=this[n],t.call(e,n,e)&&o.push(e);else if(r(t))for(n=0,i=this.length;n<i;n++)(e=this[n])[v](t)&&o.push(e);return o};var P=y.closest?function(t,e){return t.closest(e)}:function(t,e){for(var n=t.parentElement;n;){if(n[v](e))return n;n=n.parentElement}return null};j.prototype.closest=function(t){var e,n=new j,i=0;if(!t)return this;for(var o=0,r=this.length;o<r;o++)(e=P(this[o],t))&&(n[i++]=e);return n.length=i,W(n)},j.prototype.children=y.children?function(t){for(var e=new j,n=0,i=this.length;n<i;n++)T(e,this[n].children);return t?e.filter(t):e}:function(t){var e=new j;return Array.prototype.forEach.call(this,function(t){for(t=t.firstElementChild||t.firstChild;t;)t=(e[e.length]=t).nextElementSibling||t.nextSibling}),t?e.filter(t):e},j.prototype.parent=function(t){for(var e=new j,n=0,i=0,o=this.length;i<o;i++)this[i].parentElement&&(e[n++]=this[i].parentElement);return e.length=n,W(t?e.filter(t):e)},j.prototype.contents=function(t){var e=new j;return Array.prototype.forEach.call(this,function(t){for(t=t.firstChild;t;)t=(e[e.length]=t).nextSibling}),t?e.filter(t):e},j.prototype.clone=function(t,e){var n,i,o=new j;for(t=void 0===t||t,n=0,i=this.length;n<i;n++)o[n]=this[n].cloneNode(t);return o.length=i,o},j.prototype.data=function(t,e){if(!this.length)return e?this:void 0;if(void 0===e){var n=this[0].$$jqliteData&&this[0].$$jqliteData[t];return void 0===n?void 0===(n=this.dataset(t))?void 0:"{"===n.charAt(0)||"["===n.charAt(0)?JSON.parse(n):/^\d+$/.test(n)?Number(n):n:n}for(var i=0,o=this.length;i<o;i++)this[i].$$jqliteData=this[i].$$jqliteData||{},this[i].$$jqliteData[t]=e},j.prototype.removeData=function(t){for(var e=0,n=this.length;e<n;e++)this[e].$$jqliteData&&this[e].$$jqliteData[t]&&delete this[e].$$jqliteData[t];return this},j.prototype.dataset=y.dataset?function(t,e){var n,i;if(void 0===e)return void 0===t?this[0]?this[0].dataset:{}:(this[0]||{}).dataset[t];for(n=0,i=this.length;n<i;n++)this[n].dataset[t]=e;return this}:function(t,e){var n,i;if(void 0===e){var o=[];for(n=0,i=this.length;n<i;n++)o.push(this[n].getAttribute("data-"+t));return(this[0]||{getAttribute:function(){return!1}}).getAttribute(t)}for(n=0,i=this.length;n<i;n++)this[n].setAttribute("data-"+t,e)},j.prototype.removeDataset=y.dataset?function(t){var e,n;if("string"==typeof t)for(e=0,n=this.length;e<n;e++)delete this[e].dataset[t];else if(l(t))for(e=0,n=t.length;e<n;e++)this.removeData(t[e]);return this}:function(t){var e,n;if("string"==typeof t)for(e=0,n=this.length;e<n;e++)this[e].removeAttribute("data-"+t);else if(l(t))for(e=0,n=t.length;e<n;e++)this.removeData(t[e]);return this},j.prototype.attr=function(t,e){var n,i;if(a(e))for(n=0,i=this.length;n<i;n++)this[n].setAttribute(t,e(n,this[n].getAttribute(t)));else if(void 0!==e)for(n=0,i=this.length;n<i;n++)this[n].setAttribute(t,e);else if(this[0])return this[0].getAttribute(t);return this},j.prototype.removeAttr=function(t){for(var e=0,n=this.length;e<n;e++)this[e].removeAttribute(t);return this},j.prototype.prop=function(t,e){var n,i;if(a(e))for(n=0,i=this.length;n<i;n++)this[n][t]=e(n,this[n][t]);else if(void 0!==e)for(n=0,i=this.length;n<i;n++)this[n][t]=e;else if(this[0])return this[0][t];return this},j.prototype.val=function(t){var e;if(void 0===t)return"select"===(e=this[0]).nodeName?e.options[e.selectedIndex].value:this[0].value||this[0].getAttribute("value");for(var n=0,i=this.length;n<i;n++)if("select"===this[n].nodeName){e=this[n];for(var o=0,r=e.options.length;o<r;o++)if(e.options[o].value===t){e.options[o].selected=!0;break}}else void 0!==this[n].value?this[n].value=t:this[n].setAttribute("value",t);return this};var R=k?function(t,e){return t.classList.contains(e)}:function(t,e){return new RegExp("\\b"+(e||"")+"\\b","").test(t.className)},M=k?function(t,e){t.classList.add(e)}:function(t,e){R(t,e)||(t.className+=" "+e)},N=k?function(t,e){t.classList.remove(e)}:function(t,e){t.className=t.className.replace(new RegExp("\\s*"+e+"\\s*","g")," ")};function Y(t,e,n){return e&&(e.previousElementSibling&&(n=Y(t,e.previousElementSibling,n)),t[n++]=e),n}j.prototype.addClass=function(t){var e,n;if(t instanceof Function)for(e=0,n=this.length;e<n;e++)M(this[e],t.call(this[e],e,this[e].className));else if(0<=t.indexOf(" "))t.split(/\s+/).forEach(function(t){for(var e=0,n=this.length;e<n;e++)M(this[e],t)}.bind(this));else for(e=0,n=this.length;e<n;e++)M(this[e],t);return this},j.prototype.removeClass=function(t){var e,n;if(t instanceof Function)for(e=0,n=this.length;e<n;e++)N(this[e],t.call(this[e],e,this[e].className));else if(0<=t.indexOf(" "))t.split(/\s+/).forEach(function(t){for(var e=0,n=this.length;e<n;e++)N(this[e],t)}.bind(this));else for(e=0,n=this.length;e<n;e++)N(this[e],t);return this},j.prototype.hasClass=function(t){for(var e=0,n=this.length;e<n;e++)if(R(this[e],t))return!0;return!1},j.prototype.toggleClass=function(t,e){var n,i,o;if(t instanceof Function)for(n=0,i=this.length;n<i;n++)o=t.call(this[n],n,this[n].className,e),((void 0===e?!R(this[n],o):e)?M:N)(this[n],o);else if(0<=t.indexOf(" "))t.split(/\s+/).forEach(function(t){for(n=0,i=this.length;n<i;n++)((void 0===e?!R(this[n],t):e)?M:N)(this[n],t)}.bind(this));else for(n=0,i=this.length;n<i;n++)((void 0===e?!R(this[n],t):e)?M:N)(this[n],t);return this},j.prototype.append=function(t){var e,n,i,o,r,s,a=$(t);for(a.remove(),n=0,o=this.length;n<o;n++)for(e=n?a.clone(!0):a,s=this[n],i=0,r=e.length;i<r;i++)s.appendChild(e[i]);return this},j.prototype.appendTo=function(t){$(t).append(this)},j.prototype.prepend=function(t){var e,n,i,o,r,s,a,l=$(t);for(l.remove(),n=0,o=this.length;n<o;n++)if(e=n?l.clone(!0):l,s=this[n],a=s.firstChild)for(i=0,r=e.length;i<r;i++)s.insertBefore(e[i],a);else for(i=0,r=e.length;i<r;i++)s.appendChild(e[i]);return this},j.prototype.before=function(t){var e,n,i,o,r,s,a=$(t);for(a.remove(),n=0,o=this.length;n<o;n++)for(e=n?a.clone(!0):a,s=this[n].parentElement||this[n].parentNode,i=0,r=e.length;i<r;i++)s.insertBefore(e[i],this[n]);return this},j.prototype.after=function(t){var e,n,i,o,r,s,a,l=$(t);for(l.remove(),n=0,o=this.length;n<o;n++)if(e=n?l.clone(!0):l,a=this[n].parentElement||this[n].parentNode,s=this[n].nextElementSibling||this[n].nextSibling)for(i=0,r=e.length;i<r;i++)a.insertBefore(e[i],s),s=e[i];else for(i=0,r=e.length;i<r;i++)a.appendChild(e[i]);return this},j.prototype.replaceWith=function(t){var e,n,i,o,r,s,a,l=$(t);if(!l.length)return this;for(n=this.length-1;0<=n;n--)if(e=n?l.clone(!0):l,r=this[n],(s=r.parentElement).replaceChild(e[0],r),e[1])if(a=e[0].nextElementSibling)for(i=1,o=e.length;i<o;i++)s.insertBefore(e[i],a);else for(i=1,o=e.length;i<o;i++)s.appendChild(e[i]);return this},j.prototype.wrap=function(e){var n,i,o=a(e)?function(t){return $(e(t))}:(n=$(e),i=n.clone(!0),function(t){return t?i.clone(!0):n});return this.each(function(t){for(var e=o(t)[0],n=this.parentElement,i=e;i.firstElementChild;)i=i.firstElementChild;n&&(n.replaceChild(e,this),i.appendChild(this))}),this},j.prototype.wrapAll=function(t){var e=$(a(t)?t():t)[0],n=this[0].parentElement;if(n.replaceChild(e,this[0]),e)for(;e.firstElementChild;)e=e.firstElementChild;for(var i=0,o=this.length;i<o;i++)e.appendChild(this[i]);return $(e)},j.prototype.unwrap=function(){for(var t,e=this.parent(),n=0,i=e.length;n<i;n++)(t=e.eq(n)).replaceWith(t.children());return this},j.prototype.next=function(t){for(var e,n=new j,i=0,o=0,r=this.length;o<r;o++)(e=this[o].nextElementSibling)&&(n[i++]=e);return n.length=i,"string"==typeof t?n.filter(t):n},j.prototype.nextAll=function(t){for(var e,n=new j,i=0,o=0,r=this.length;o<r;o++)for(e=this[o].nextElementSibling;e;)e=(n[i++]=e).nextElementSibling;return n.length=i,W(t?n.filter(t):n)},j.prototype.prev=function(t){for(var e,n=new j,i=0,o=0,r=this.length;o<r;o++)(e=this[o].previousElementSibling)&&(n[i++]=e);return n.length=i,t?n.filter(t):n},j.prototype.prevAll=function(t){for(var e=new j,n=0,i=0,o=this.length;i<o;i++)n=Y(e,this[i].previousElementSibling,n);return e.length=n,W(t?e.filter(t):e)},j.prototype.remove=function(t){for(var e,n=t?this.filter(t):this,i=0,o=n.length;i<o;i++)(e=n[i].parentElement||n[i].parentNode)&&e.removeChild(n[i]);return this},j.prototype.detach=function(t){for(var e=t?this.filter(t):this,n=new j,i=0,o=e.length;i<o;i++)w.appendChild(e[i]),n.push(e[i]);return n},j.prototype.css=function(t,e){if(void 0!==e){var n,i;if("string"==typeof(e=e instanceof Function?e():e instanceof Number?e+"px":e)&&/^\+=|\-=/.test(e))for(e="-"===e.charAt(0)?-parseFloat(e.substr(2)):parseFloat(e.substr(2)),n=0,i=this.length;n<i;n++)this[n].style[t]=parseFloat(this[n].style[t])+e+"px";else for(n=0,i=this.length;n<i;n++)this[n].style[t]=e;return this}if(t instanceof Object)for(var o in t)this.css(o,t[o]);else if(this[0])return this[0].style[t]||window.getComputedStyle(this[0])[t];return this};var X=void 0!==y.style.webkitTransition?"webkitTransition":void 0!==y.style.mozTransition?"mozTransition":void 0!==y.style.msTransition?"msTransition":void 0;function B(n,t,i,o,r){"string"==typeof i&&(i=B.times[i]),o=o||"linear";for(var e=t?0:1,s=t?1:0,a=0,l=n.length;a<l;a++)n[a].style.opacity=e;return setTimeout(function(){for(var t=0,e=n.length;t<e;t++)n[t].$$jqliteTransition=void 0===n[t].$$jqliteTransition?n[t].style[X]||"":n[t].$$jqliteTransition,n[t].style[X]="opacity "+i+"ms "+o,n[t].style.opacity=s},20),setTimeout(function(){for(var t=0,e=n.length;t<e;t++)n[t].style.opacity="",n[t].style[X]=n[t].$$jqliteTransition;r.call(n)},i),n}function D(t,e,n,i){var o,r;if("string"==typeof e)if(/\s/.test(e))e=e.split(/\s+/g);else{if(!a(n))throw"listener needs to be a function";for(o=0,r=t.length;o<r;o++)L(t[o],e,n,i)}if(l(e))for(o=0,r=e.length;o<r;o++)D(t,e[o],n,i);else if(s(e))for(o in e)D(t,o,e[o],i);return t}B.times={slow:600,normal:400,fast:200},j.prototype.show=function(t,e,n){if(t){return this.show(),B(this,!0,t,e,n||function(){})}for(var i=0,o=this.length;i<o;i++)this[i].style.display&&(this[i].style.display="");return this},j.prototype.hide=function(t,e,n){if(t)return B(this,!1,t,e,function(){this.hide(),n&&n.call(this)});for(var i=0,o=this.length;i<o;i++)this[i].style.display="none";return this},j.prototype.position=function(){if(this.length)return{top:this[0].offsetTop,left:this[0].offsetLeft}},j.prototype.offset=function(t){if(void 0===t){var e=this[0].getBoundingClientRect();return this.length&&{top:e.top+document.body.scrollTop,left:e.left}}if(t instanceof Function&&(t=t()),"object"==typeof t&&void 0!==t.top&&void 0!==t.left){for(var n=0,i=this.length;n<i;n++){this[n].style.position="relative";var o=this[n].getBoundingClientRect();this[n].style.top=t.top-o.top+parseFloat(this[n].style.top||0)-document.body.scrollTop+"px",this[n].style.left=t.left-o.left+parseFloat(this[n].style.left||0)+"px"}return t}},j.prototype.width=function(t){var e;if(!0===t){if(this.length)return(e=this[0]).offsetWidth}else if(void 0!==t)for(var n=0,i=this.length;n<i;n++)this[n].style.width=t;else if(this.length)return(e=this[0]).offsetWidth-parseFloat(window.getComputedStyle(e,null).getPropertyValue("border-left-width"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-left"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-right"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("border-right-width"))},j.prototype.height=function(t){var e;if(!0===t){if(this.length)return(e=this[0]).offsetHeight}else if(void 0!==t)for(var n=0,i=this.length;n<i;n++)this[n].style.height=t;else if(this.length)return(e=this[0]).offsetHeight-parseFloat(window.getComputedStyle(e,null).getPropertyValue("border-top-width"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-top"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("padding-bottom"))-parseFloat(window.getComputedStyle(e,null).getPropertyValue("border-bottom-width"))},j.prototype.html=function(t){var e,n;if(void 0===t){for(t="",e=0,n=this.length;e<n;e++)t+=this[e].innerHTML;return t}if(!0===t){for(t="",e=0,n=this.length;e<n;e++)t+=this[e].outerHTML;return t}if(a(t)){for(e=0,n=this.length;e<n;e++)this[e].innerHTML=t(e,this[e].innerHTML);return this}for(e=0,n=this.length;e<n;e++)this[e].innerHTML=t;return this.find("script").each(function(){if(("text/javascript"==this.type||!this.type)&&this.textContent)try{b("(function(){ 'use strict';"+this.textContent+"})();")}catch(t){throw new Error(t.message)}}),this},j.prototype.text=function(t){var e,n;if(void 0===t){for(t="",e=0,n=this.length;e<n;e++)t+=this[e].textContent;return t}if(a(t)){for(e=0,n=this.length;e<n;e++)this[e].textContent=t(e,this[e].textContent);return this}for(e=0,n=this.length;e<n;e++)this[e].textContent=t;return this},j.prototype.on=function(t,e){return D(this,t,e)};var q={list:["click","focus","blur","submit"],define:function(i){j.prototype[i]=function(t){if(t)this.on(i,t);else for(var e=0,n=this.length;e<n;e++)this[e][i]();return this}},init:function(){for(var t=0,e=q.list.length;t<e;t++)q.define(q.list[t])}};return q.init(),j.prototype.one=j.prototype.once=function(t,e){return D(this,t,e,!0)},j.prototype.off=function(t,e){var n,i,o,r;if(/\s/.test(t)&&(t=t.split(/\s+/g)),t instanceof Array){for(n=0,i=this.length;n<i;n++)this.off(t[n],e);return this}if(void 0===t)for(n=0,i=this.length;n<i;n++)for(r in o=this[n].$$jqListeners||{})E(this[n],r),delete o[r];else if("string"!=typeof t||!a(e)&&void 0!==e)throw"bad arguments";for(n=0,i=this.length;n<i;n++)E(this[n],t,e);return this},j.prototype.trigger=function(t,e,n){if("string"!=typeof t)throw"bad arguments";for(var i=0,o=this.length;i<o;i++)m(this[i],t,e,n);return this},j.prototype.stopPropagation=function(){for(var t=0,e=arguments.length;t<e;t++)this.on(arguments[t],function(t){t.stopPropagation()})},["mouseenter","mouseleave"].forEach(function(e){j.prototype[e]=function(t){return this.on(e,t),this}}),j.prototype.hover=function(t,e){return this.mouseenter(t).mouseleave(e)},S.noConflict=function(){return t.$===S&&delete t.$,S},S.contains=function(t,e){if(arguments.length<2)throw new Error("2 arguments required");return t.contains?t.contains(e):function(t,e){for(e=e.parentnode||e.parentElement;e;){if(e===t)return!0;e=e.parentnode||e.parentElement}return!1}(t,e)},S}(t);"object"==typeof module&&"object"==typeof exports?module.exports=n:("function"==typeof define?define("jqlite",function(){return n}):"function"==typeof angular?angular.module("jqlite",[]).constant("jqlite",n):t.jqlite=n,BL_Klavogonki.$=n)}(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.PerfectScrollbar=e()}(this,function(){"use strict";function m(t){return getComputedStyle(t)}function p(t,e){for(var n in e){var i=e[n];"number"==typeof i&&(i+="px"),t.style[n]=i}return t}function d(t){var e=document.createElement("div");return e.className=t,e}function a(t,e){if(!n)throw new Error("No element matching method supported");return n.call(t,e)}function i(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function o(t,e){return Array.prototype.filter.call(t.children,function(t){return a(t,e)})}function b(t,e){var n=t.element.classList,i=w.state.scrolling(e);n.contains(i)?clearTimeout(l[e]):n.add(i)}function y(t,e){l[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(w.state.scrolling(e))},t.settings.scrollingThreshold)}function f(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function s(t,e,n,i,o){var r=n[0],s=n[1],a=n[2],l=n[3],c=n[4],u=n[5];void 0===i&&(i=!0),void 0===o&&(o=!1);var h,p,d=t.element;t.reach[l]=null,d[a]<1&&(t.reach[l]="start"),d[a]>t[r]-t[s]-1&&(t.reach[l]="end"),e&&(d.dispatchEvent(f("ps-scroll-"+l)),e<0?d.dispatchEvent(f("ps-scroll-"+c)):0<e&&d.dispatchEvent(f("ps-scroll-"+u)),i&&(b(h=t,p=l),y(h,p))),t.reach[l]&&(e||o)&&d.dispatchEvent(f("ps-"+l+"-reach-"+t.reach[l]))}function g(t){return parseInt(t,10)||0}function r(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function e(e,t){function n(t){d[u]=f+v*(t[s]-g),b(e,h),_(e),t.stopPropagation(),t.preventDefault()}function i(){y(e,h),e[p].classList.remove(w.state.clicking),e.event.unbind(e.ownerDocument,"mousemove",n)}var o=t[0],r=t[1],s=t[2],a=t[3],l=t[4],c=t[5],u=t[6],h=t[7],p=t[8],d=e.element,f=null,g=null,v=null;e.event.bind(e[l],"mousedown",function(t){f=d[u],g=t[s],v=(e[r]-e[o])/(e[a]-e[c]),e.event.bind(e.ownerDocument,"mousemove",n),e.event.once(e.ownerDocument,"mouseup",i),e[p].classList.add(w.state.clicking),t.stopPropagation(),t.preventDefault()})}var n="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),w={main:"ps",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},l={x:null,y:null},c=function(t){this.element=t,this.handlers={}},t={isEmpty:{configurable:!0}};c.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},c.prototype.unbind=function(e,n){var i=this;this.handlers[e]=this.handlers[e].filter(function(t){return!(!n||t===n)||(i.element.removeEventListener(e,t,!1),!1)})},c.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},t.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(c.prototype,t);var v=function(){this.eventElements=[]};v.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new c(e),this.eventElements.push(t)),t},v.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},v.prototype.unbind=function(t,e,n){var i=this.eventElement(t);i.unbind(e,n),i.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(i),1)},v.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]},v.prototype.once=function(t,e,n){var i=this.eventElement(t),o=function(t){i.unbind(e,o),n(t)};i.bind(e,o)};var u=function(t,e,n,i,o){var r;if(void 0===i&&(i=!0),void 0===o&&(o=!1),"top"===e)r=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");r=["contentWidth","containerWidth","scrollLeft","x","left","right"]}s(t,n,r,i,o)},k={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},_=function(t){var e=t.element,n=Math.floor(e.scrollTop);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(o(e,w.element.rail("x")).forEach(function(t){return i(t)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(o(e,w.element.rail("y")).forEach(function(t){return i(t)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=r(t,g(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=g((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=r(t,g(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=g(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),function(t,e){var n={width:e.railXWidth},i=Math.floor(t.scrollTop);e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-i:n.top=e.scrollbarXTop+i,p(e.scrollbarXRail,n);var o={top:i,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?o.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:o.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?o.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:o.left=e.scrollbarYLeft+t.scrollLeft,p(e.scrollbarYRail,o),p(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),p(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}(e,t),t.scrollbarXActive?e.classList.add(w.state.active("x")):(e.classList.remove(w.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=0),t.scrollbarYActive?e.classList.add(w.state.active("y")):(e.classList.remove(w.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)},x={"click-rail":function(n){n.event.bind(n.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),n.event.bind(n.scrollbarYRail,"mousedown",function(t){var e=t.pageY-window.pageYOffset-n.scrollbarYRail.getBoundingClientRect().top>n.scrollbarYTop?1:-1;n.element.scrollTop+=e*n.containerHeight,_(n),t.stopPropagation()}),n.event.bind(n.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),n.event.bind(n.scrollbarXRail,"mousedown",function(t){var e=t.pageX-window.pageXOffset-n.scrollbarXRail.getBoundingClientRect().left>n.scrollbarXLeft?1:-1;n.element.scrollLeft+=e*n.containerWidth,_(n),t.stopPropagation()})},"drag-thumb":function(t){e(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),e(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(r){var s=r.element;r.event.bind(r.ownerDocument,"keydown",function(t){if(!(t.isDefaultPrevented&&t.isDefaultPrevented()||t.defaultPrevented)&&(a(s,":hover")||a(r.scrollbarX,":focus")||a(r.scrollbarY,":focus"))){var e=document.activeElement?document.activeElement:r.ownerDocument.activeElement;if(e){if("IFRAME"===e.tagName)e=e.contentDocument.activeElement;else for(;e.shadowRoot;)e=e.shadowRoot.activeElement;if(a(o=e,"input,[contenteditable]")||a(o,"select,[contenteditable]")||a(o,"textarea,[contenteditable]")||a(o,"button,[contenteditable]"))return}var n=0,i=0;switch(t.which){case 37:n=t.metaKey?-r.contentWidth:t.altKey?-r.containerWidth:-30;break;case 38:i=t.metaKey?r.contentHeight:t.altKey?r.containerHeight:30;break;case 39:n=t.metaKey?r.contentWidth:t.altKey?r.containerWidth:30;break;case 40:i=t.metaKey?-r.contentHeight:t.altKey?-r.containerHeight:-30;break;case 32:i=t.shiftKey?r.containerHeight:-r.containerHeight;break;case 33:i=r.containerHeight;break;case 34:i=-r.containerHeight;break;case 36:i=r.contentHeight;break;case 35:i=-r.contentHeight;break;default:return}r.settings.suppressScrollX&&0!==n||r.settings.suppressScrollY&&0!==i||(s.scrollTop-=i,s.scrollLeft+=n,_(r),function(t,e){var n=Math.floor(s.scrollTop);if(0===t){if(!r.scrollbarYActive)return!1;if(0===n&&0<e||n>=r.contentHeight-r.containerHeight&&e<0)return!r.settings.wheelPropagation}var i=s.scrollLeft;if(0===e){if(!r.scrollbarXActive)return!1;if(0===i&&t<0||i>=r.contentWidth-r.containerWidth&&0<t)return!r.settings.wheelPropagation}return!0}(n,i)&&t.preventDefault())}var o})},wheel:function(g){function t(t){var e,n,i,o,r,s,a,l,c,u,h=(n=(e=t).deltaX,i=-1*e.deltaY,void 0!==n&&void 0!==i||(n=-1*e.wheelDeltaX/6,i=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(n*=10,i*=10),n!=n&&i!=i&&(n=0,i=e.wheelDelta),e.shiftKey?[-i,-n]:[n,i]),p=h[0],d=h[1];if(!function(t,e,n){if(!k.isWebKit&&v.querySelector("select:focus"))return!0;if(!v.contains(t))return!1;for(var i=t;i&&i!==v;){if(i.classList.contains(w.element.consuming))return!0;var o=m(i);if([o.overflow,o.overflowX,o.overflowY].join("").match(/(scroll|auto)/)){var r=i.scrollHeight-i.clientHeight;if(0<r&&!(0===i.scrollTop&&0<n||i.scrollTop===r&&n<0))return!0;var s=i.scrollWidth-i.clientWidth;if(0<s&&!(0===i.scrollLeft&&e<0||i.scrollLeft===s&&0<e))return!0}i=i.parentNode}return!1}(t.target,p,d)){var f=!1;g.settings.useBothWheelAxes?g.scrollbarYActive&&!g.scrollbarXActive?(d?v.scrollTop-=d*g.settings.wheelSpeed:v.scrollTop+=p*g.settings.wheelSpeed,f=!0):g.scrollbarXActive&&!g.scrollbarYActive&&(p?v.scrollLeft+=p*g.settings.wheelSpeed:v.scrollLeft-=d*g.settings.wheelSpeed,f=!0):(v.scrollTop-=d*g.settings.wheelSpeed,v.scrollLeft+=p*g.settings.wheelSpeed),_(g),(f=f||(o=p,r=d,s=Math.floor(v.scrollTop),a=0===v.scrollTop,l=s+v.offsetHeight===v.scrollHeight,c=0===v.scrollLeft,u=v.scrollLeft+v.offsetWidth===v.scrollWidth,!(Math.abs(r)>Math.abs(o)?a||l:c||u)||!g.settings.wheelPropagation))&&!t.ctrlKey&&(t.stopPropagation(),t.preventDefault())}}var v=g.element;void 0!==window.onwheel?g.event.bind(v,"wheel",t):void 0!==window.onmousewheel&&g.event.bind(v,"mousewheel",t)},touch:function(a){function l(t,e){h.scrollTop-=e,h.scrollLeft-=t,_(a)}function c(t){return t.targetTouches?t.targetTouches[0]:t}function u(t){return!(t.pointerType&&"pen"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function t(t){if(u(t)){var e=c(t);p.pageX=e.pageX,p.pageY=e.pageY,d=(new Date).getTime(),null!==i&&clearInterval(i)}}function e(t){if(u(t)){var e=c(t),n={pageX:e.pageX,pageY:e.pageY},i=n.pageX-p.pageX,o=n.pageY-p.pageY;if(function(t,e,n){if(!h.contains(t))return!1;for(var i=t;i&&i!==h;){if(i.classList.contains(w.element.consuming))return!0;var o=m(i);if([o.overflow,o.overflowX,o.overflowY].join("").match(/(scroll|auto)/)){var r=i.scrollHeight-i.clientHeight;if(0<r&&!(0===i.scrollTop&&0<n||i.scrollTop===r&&n<0))return!0;var s=i.scrollLeft-i.clientWidth;if(0<s&&!(0===i.scrollLeft&&e<0||i.scrollLeft===s&&0<e))return!0}i=i.parentNode}return!1}(t.target,i,o))return;l(i,o),p=n;var r=(new Date).getTime(),s=r-d;0<s&&(f.x=i/s,f.y=o/s,d=r),function(t,e){var n=Math.floor(h.scrollTop),i=h.scrollLeft,o=Math.abs(t),r=Math.abs(e);if(o<r){if(e<0&&n===a.contentHeight-a.containerHeight||0<e&&0===n)return 0===window.scrollY&&0<e&&k.isChrome}else if(r<o&&(t<0&&i===a.contentWidth-a.containerWidth||0<t&&0===i))return!0;return!0}(i,o)&&t.preventDefault()}}function n(){a.settings.swipeEasing&&(clearInterval(i),i=setInterval(function(){a.isInitialized?clearInterval(i):f.x||f.y?Math.abs(f.x)<.01&&Math.abs(f.y)<.01?clearInterval(i):(l(30*f.x,30*f.y),f.x*=.8,f.y*=.8):clearInterval(i)},10))}if(k.supportsTouch||k.supportsIePointer){var h=a.element,p={},d=0,f={},i=null;k.supportsTouch?(a.event.bind(h,"touchstart",t),a.event.bind(h,"touchmove",e),a.event.bind(h,"touchend",n)):k.supportsIePointer&&(window.PointerEvent?(a.event.bind(h,"pointerdown",t),a.event.bind(h,"pointermove",e),a.event.bind(h,"pointerup",n)):window.MSPointerEvent&&(a.event.bind(h,"MSPointerDown",t),a.event.bind(h,"MSPointerMove",e),a.event.bind(h,"MSPointerUp",n)))}}},h=function(t,e){var n=this;if(void 0===e&&(e={}),"string"==typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var i in(this.element=t).classList.add(w.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},e)n.settings[i]=e[i];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var o,r,s=function(){return t.classList.add(w.state.focus)},a=function(){return t.classList.remove(w.state.focus)};this.isRtl="rtl"===m(t).direction,this.isNegativeScroll=(r=t.scrollLeft,t.scrollLeft=-1,o=t.scrollLeft<0,t.scrollLeft=r,o),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new v,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=d(w.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=d(w.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",a),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var l=m(this.scrollbarXRail);this.scrollbarXBottom=parseInt(l.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=g(l.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=g(l.borderLeftWidth)+g(l.borderRightWidth),p(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=g(l.marginLeft)+g(l.marginRight),p(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=d(w.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=d(w.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",a),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var c,u,h=m(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=g(h.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?(c=this.scrollbarY,g((u=m(c)).width)+g(u.paddingLeft)+g(u.paddingRight)+g(u.borderLeftWidth)+g(u.borderRightWidth)):null,this.railBorderYWidth=g(h.borderTopWidth)+g(h.borderBottomWidth),p(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=g(h.marginTop)+g(h.marginBottom),p(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(t){return x[t](n)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(t){return n.onScroll(t)}),_(this)};return h.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,p(this.scrollbarXRail,{display:"block"}),p(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=g(m(this.scrollbarXRail).marginLeft)+g(m(this.scrollbarXRail).marginRight),this.railYMarginHeight=g(m(this.scrollbarYRail).marginTop)+g(m(this.scrollbarYRail).marginBottom),p(this.scrollbarXRail,{display:"none"}),p(this.scrollbarYRail,{display:"none"}),_(this),u(this,"top",0,!1,!0),u(this,"left",0,!1,!0),p(this.scrollbarXRail,{display:""}),p(this.scrollbarYRail,{display:""}))},h.prototype.onScroll=function(t){this.isAlive&&(_(this),u(this,"top",this.element.scrollTop-this.lastScrollTop),u(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},h.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),i(this.scrollbarX),i(this.scrollbarY),i(this.scrollbarXRail),i(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},h.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")},h}),function o(r,s,a){function l(n,t){if(!s[n]){if(!r[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(c)return c(n,!0);throw new Error("Cannot find module '"+n+"'")}var i=s[n]={exports:{}};r[n][0].call(i.exports,function(t){var e=r[n][1][t];return l(e||t)},i,i.exports,o,r,s,a)}return s[n].exports}for(var c="function"==typeof require&&require,t=0;t<a.length;t++)l(a[t]);return l}({1:[function(t,e){function n(t,e,n){this.widget=t,this.likely=e,this.options=s.merge(n),this.init()}var o=t("./services"),r=t("./config"),i=t("./fetch"),s=t("./utils"),a=t("./dom"),l='<span class="{className}">{content}</span>';n.prototype={init:function(){this.detectService(),this.detectParams(),this.service&&(this.initHtml(),setTimeout(this.initCounter.bind(this),0))},update:function(t){var e="."+r.prefix+"counter";counters=a.findAll(e,this.widget),s.extend(this.options,s.merge({forceUpdate:!1},t)),s.toArray(counters).forEach(function(t){t.parentNode.removeChild(t)}),this.initCounter()},detectService:function(){var t=this.widget,e=s.getDataset(t).service;if(!e){for(var n=t.className.split(" "),i=0;i<n.length&&!(n[i]in o);i++);e=n[i]}e&&(this.service=e,s.extend(this.options,o[e]))},detectParams:function(){var t=this.options,e=s.getDataset(this.widget);if(e.counter){var n=parseInt(e.counter,10);isNaN(n)?t.counterUrl=e.counter:t.counterNumber=n}t.title=e.title||t.title,t.url=e.url||t.url},initHtml:function(){var t=this.options,e=this.widget,n=e.innerHTML;e.addEventListener("click",this.click.bind(this)),e.classList.remove(this.service),e.className+=" "+this.className("widget");var i=s.template(l,{className:this.className("button"),content:n}),o=s.template(l,{className:this.className("icon"),content:a.wrapSVG(t.svgi)});e.innerHTML=o+i},initCounter:function(){var t=this.options;t.counters&&t.counterNumber?this.updateCounter(t.counterNumber):t.counterUrl&&i(this.service,t.url,t)(this.updateCounter.bind(this))},className:function(t){var e=r.prefix+t;return e+" "+e+"--"+this.service},updateCounter:function(t){t=parseInt(t,10)||0;var e=a.find("."+r.name+"__counter",this.widget);e&&e.parentNode.removeChild(e);var n={className:this.className("counter"),content:t};t||this.options.zeroes||(n.className+=" "+r.prefix+"counter--empty",n.content=""),this.widget.appendChild(a.createNode(s.template(l,n))),this.likely.updateCounter(this.service,t)},click:function(){var t=this.options;if("more"==this.service)this.widget.classList.toggle("active"),this.widget.parentElement.classList.toggle(this.options.className);else if("email"==this.service){var e=s.makeUrl(t.popupUrl,{url:t.url,title:t.title});window.location=e}else if(t.click.call(this)){var n=this.likely.container.dataset.twitter,i=this.likely.container.dataset.twitterUrl;e=s.makeUrl(t.popupUrl,{url:"twitter"==this.service&&""!=i&&null!=i?i:t.url,title:"twitter"==this.service&&""!=n&&null!=n?n:t.title});a.openPopup(this.addAdditionalParamsToUrl(e),r.prefix+this.service,t.popupWidth,t.popupHeight)}return!1},addAdditionalParamsToUrl:function(t){var e=s.query(s.merge(this.widget.dataset,this.options.data)),n=-1===t.indexOf("?")?"?":"&";return""===e?t:t+n+e}},e.exports=n},{"./config":2,"./dom":3,"./fetch":6,"./services":12,"./utils":22}],2:[function(t,e){var n="https:"===window.location.protocol;e.exports={name:"likely",prefix:"likely__",secure:n,protocol:n?"https:":"http:"}},{}],3:[function(t,e){var n=document.createElement("div"),i=0,o=e.exports={wrapSVG:function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M'+t+'z"/></svg>'},createNode:function(t){return n.innerHTML=t,n.children[0]},getScript:function(t){var e=document.createElement("script"),n=document.head;e.type="text/javascript",e.src=t,n.appendChild(e),n.removeChild(e)},getJSON:function(t,e){var n=encodeURIComponent("random_fun_"+ ++i);t=t.replace(/callback=(\?)/,"callback="+n),window[n]=e,o.getScript(t)},find:function(t,e){return(e||document).querySelector(t)},findAll:function(t,e){return(e||document).querySelectorAll(t)},openPopup:function(t,e,n,i){var o=Math.round(screen.width/2-n/2),r=0;screen.height>i&&(r=Math.round(screen.height/3-i/2));var s="left="+o+",top="+r+",width="+n+",height="+i+",personalbar=0,toolbar=0,scrollbars=1,resizable=1",a=window.open(t,e,s);return a?(a.focus(),a):location.href=t}}},{}],4:[function(t,e){e.exports=function(n){var i=[];return function(e){var t=typeof e;return"undefined"==t?n:void("function"==t?i.push(e):(n=e,i.forEach(function(t){t(e)})))}}},{}],5:[function(t){var e=t("./index.js");window.likely=e,document.addEventListener("DOMContentLoaded",e.initiate)},{"./index.js":7}],6:[function(t,e){var s=t("./services"),a=t("./factory"),l=t("./utils"),c=(t("./dom"),{});e.exports=function(t,e,n){c[t]||(c[t]={});var i=c[t],o=i[e];if(!n.forceUpdate&&o)return o;o=a();var r=l.makeUrl(n.counterUrl,{url:e});return s[t].counter(r,o,e),i[e]=o}},{"./dom":3,"./factory":4,"./services":12,"./utils":22}],7:[function(t,e){"use strict";var i=t("./widget"),o=t("./config"),r=t("./utils"),n=t("./dom"),s=function(t,e){e=e||{};var n=t[o.name];return n?n.update(e):t[o.name]=new i(t,r.merge({},s.defaults,e,r.bools(t))),n};s.initiate=s.initate=function(){var t=n.findAll("."+o.name);r.toArray(t).forEach(s)},s.defaults={counters:!0,timeout:1e3,zeroes:!1,title:document.title,wait:500,url:window.location.href.replace(window.location.hash,"")},e.exports=s},{"./config":2,"./dom":3,"./utils":22,"./widget":23}],8:[function(t,e){var i=t("./dom"),n=function(t,e){var n=this;i.getJSON(t,function(t){try{"function"==typeof n.convertNumber&&(t=n.convertNumber(t)),e(t)}catch(t){}})};e.exports=function(t){t.counter=t.counter||n,t.click=t.click||function(){return!0}}},{"./dom":3}],9:[function(t,e){var n=(t("../config"),{popupUrl:"mailto:?subject={title}&body={url}",popupWidth:0,popupHeight:0});e.exports=n},{"../config":2}],10:[function(t,e){e.exports={counterUrl:"https://graph.facebook.com/?fields=share,og_object{likes.limit(0).summary(true),comments.limit(0).summary(true)}&id={url}&callback=?",convertNumber:function(t){return t.share.share_count},popupUrl:"https://www.facebook.com/sharer/sharer.php?u={url}",popupWidth:600,popupHeight:500}},{}],11:[function(t,e){var n=(t("../config"),t("../utils"),t("../dom"),{gid:0,promises:{},popupUrl:"https://plus.google.com/share?url={url}",popupWidth:700,popupHeight:500});e.exports=n},{"../config":2,"../dom":3,"../utils":22}],12:[function(t,e){var n=t("../service"),i=t("../utils"),o=t("../svg.json"),r={odnoklassniki:t("./odnoklassniki"),vkontakte:t("./vk"),facebook:t("./facebook"),twitter:t("./twitter"),gplus:t("./gplus"),pocket:t("./pocket"),telegram:t("./telegram"),whatsapp:t("./whatsapp"),viber:t("./viber"),email:t("./email"),more:t("./more")};i.each(r,function(t,e){n(t),t.svgi=o[e],t.name=e}),e.exports=r},{"../service":8,"../svg.json":21,"../utils":22,"./email":9,"./facebook":10,"./gplus":11,"./more":13,"./odnoklassniki":14,"./pocket":15,"./telegram":16,"./twitter":17,"./viber":18,"./vk":19,"./whatsapp":20}],13:[function(t,e){var n=t("../config");e.exports={parent:n.name,className:n.name+"--expanded"}},{"../config":2}],14:[function(t,e){var n=t("../config"),i=t("../utils"),o=t("../dom"),r={counterUrl:n.secure?void 0:"http://connect.ok.ru/dk?st.cmd=extLike&ref={url}&uid={index}",counter:function(t,e){this.promises.push(e),o.getScript(i.makeUrl(t,{index:this.promises.length-1}))},promises:[],popupUrl:"http://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",popupWidth:640,popupHeight:400};i.set(window,"ODKL.updateCount",function(t,e){r.promises[t](e)}),e.exports=r},{"../config":2,"../dom":3,"../utils":22}],15:[function(t,e){var n={popupUrl:t("../config").protocol+"//getpocket.com/save?url={url}&format=json&callback=?",popupWidth:600,popupHeight:300};e.exports=n},{"../config":2}],16:[function(t,e){e.exports={popupUrl:"tg://msg?text={title}%0A{url}",popupWidth:600,popupHeight:450}},{}],17:[function(t,e){var n={popupUrl:t("../config").protocol+"//twitter.com/intent/tweet?url={url}&text={title}",popupWidth:600,popupHeight:450,click:function(){return/[\.\?:\-–—]\s*$/.test(this.options.title)||(this.options.title+=":"),!0}};e.exports=n},{"../config":2}],18:[function(t,e){e.exports={popupUrl:"viber://forward?text={title}%0A{url}",popupWidth:600,popupHeight:450}},{}],19:[function(t,e){var n=t("../config"),i=t("../utils"),o=t("../dom"),r={counterUrl:"https://vk.com/share.php?act=count&url={url}&index={index}",counter:function(t,e){this.promises.push(e),o.getScript(i.makeUrl(t,{index:this.promises.length-1}))},promises:[],popupUrl:n.protocol+"//vk.com/share.php?url={url}&title={title}",popupWidth:550,popupHeight:330};i.set(window,"VK.Share.count",function(t,e){r.promises[t](e)}),e.exports=r},{"../config":2,"../dom":3,"../utils":22}],20:[function(t,e){e.exports={popupUrl:"whatsapp://send?text={title}%0A{url}",popupWidth:600,popupHeight:450}},{}],21:[function(t,e){e.exports={facebook:"5.9 16h3.3V8h2.2l.3-2.8H9.2V3.8c0-.7.1-1.1 1.1-1.1h1.4V0H9.5C6.9 0 5.9 1.3 5.9 3.6v1.7H4.3V8H6v8",twitter:"15.96 3.42c-.04.153-.144.31-.237.414l-.118.058v.118l-.59.532-.237.295c-.05.036-.398.21-.413.237V6.49h-.06v.473h-.058v.294h-.058v.296h-.06v.235h-.06v.237h-.058c-.1.355-.197.71-.295 1.064h-.06v.116h-.06c-.02.1-.04.197-.058.296h-.06c-.04.118-.08.237-.118.355h-.06c-.038.118-.078.236-.117.353l-.118.06-.06.235-.117.06v.116l-.118.06v.12h-.06c-.02.057-.038.117-.058.175l-.118.06v.117c-.06.04-.118.08-.177.118v.118l-.237.177v.118l-.59.53-.532.592h-.117c-.06.078-.118.156-.177.236l-.177.06-.06.117h-.118l-.06.118-.176.06v.058h-.118l-.06.118-.353.12-.06.117c-.078.02-.156.04-.235.058v.06c-.118.038-.236.078-.354.118v.058H8.76v.06h-.12v.06h-.176v.058h-.118v.06H8.17v.058H7.99v.06l-.413.058v.06h-.237c-.667.22-1.455.293-2.36.293h-.886v-.058h-.53v-.06H3.27v-.06h-.295v-.06H2.68v-.057h-.177v-.06h-.236v-.058H2.09v-.06h-.177v-.058h-.177v-.06H1.56v-.058h-.12v-.06l-.294-.06v-.057c-.118-.04-.236-.08-.355-.118v-.06H.674v-.058H.555v-.06H.437v-.058H.32l-.06-.12H.142v-.058c-.13-.08-.083.026-.177-.118H1.56v-.06c.294-.04.59-.077.884-.117v-.06h.177v-.058h.237v-.06h.118v-.06h.177v-.057h.118v-.06h.177v-.058l.236-.06v-.058l.236-.06c.02-.038.04-.078.058-.117l.237-.06c.02-.04.04-.077.058-.117h.118l.06-.118h.118c.036-.025.047-.078.118-.118V12.1c-1.02-.08-1.84-.54-2.303-1.183-.08-.058-.157-.118-.236-.176v-.117l-.118-.06v-.117c-.115-.202-.268-.355-.296-.65.453.004.987.008 1.354-.06v-.06c-.254-.008-.47-.08-.65-.175v-.058H2.32v-.06c-.08-.02-.157-.04-.236-.058l-.06-.118h-.117l-.118-.178h-.12c-.077-.098-.156-.196-.235-.294l-.118-.06v-.117l-.177-.12c-.35-.502-.6-1.15-.59-2.006h.06c.204.234.948.377 1.357.415v-.06c-.257-.118-.676-.54-.827-.768V5.9l-.118-.06c-.04-.117-.08-.236-.118-.354h-.06v-.118H.787c-.04-.196-.08-.394-.118-.59-.06-.19-.206-.697-.118-1.005h.06V3.36h.058v-.177h.06v-.177h.057V2.83h.06c.04-.118.078-.236.117-.355h.118v.06c.12.097.237.196.355.295v.118l.118.058c.08.098.157.197.236.295l.176.06.354.413h.118l.177.236h.118l.06.117h.117c.04.06.08.118.118.177h.118l.06.118.235.06.06.117.356.12.06.117.53.176v.06h.118v.058l.236.06v.06c.118.02.236.04.355.058v.06h.177v.058h.177v.06h.176v.058h.236v.06l.472.057v.06l1.417.18v-.237c-.1-.112-.058-.442-.057-.65 0-.573.15-.99.354-1.358v-.117l.118-.06.06-.235.176-.118v-.118c.14-.118.276-.236.414-.355l.06-.117h.117l.12-.177.235-.06.06-.117h.117v-.058H9.7v-.058h.177v-.06h.177v-.058h.177v-.06h.296v-.058h1.063v.058h.294v.06h.177v.058h.178v.06h.177v.058h.118v.06h.118l.06.117c.08.018.158.038.236.058.04.06.08.118.118.177h.118l.06.117c.142.133.193.163.472.178.136-.12.283-.05.472-.118v-.06h.177v-.058h.177v-.06l.236-.058v-.06h.177l.59-.352v.176h-.058l-.06.295h-.058v.117h-.06v.118l-.117.06v.118l-.177.118v.117l-.118.06-.354.412h-.117l-.177.236h.06c.13-.112.402-.053.59-.117l1.063-.353",vkontakte:"7.8 12.4h.9s.3 0 .4-.2c.1-.1.1-.4.1-.4s0-1.3.6-1.4c.6-.2 1.3 1.2 2.1 1.7.6.4 1 .3 1 .3H15s1.1-.1.6-.9c0-.1-.3-.6-1.6-1.8-1.3-1.2-1.1-1 .4-3.1 1-1.3 1.3-2.1 1.2-2.4.1-.3-.6-.3-.6-.3h-2.4s-.2 0-.3.1c-.1.1-.2.3-.2.3s-.4 1-.9 1.8c-1 1.8-1.5 1.9-1.6 1.8-.4-.3-.3-1-.3-1.6 0-1.7.3-2.4-.5-2.6-.3-.1-.4-.2-1.1-.2-.8 0-1.5 0-2 .2-.2.2-.4.5-.3.5.2 0 .5.1.7.3.2.3.2 1.1.2 1.1s.1 2-.3 2.3c-.3.1-.7-.2-1.7-1.8-.5-.8-.8-1.8-.8-1.8l-.2-.2-.4-.2H.7s-.3 0-.5.2c-.1.1 0 .4 0 .4S2 8.6 4 10.7c1.8 1.8 3.8 1.7 3.8 1.7",gplus:"8,6.5v3h4.291c-0.526,2.01-2.093,3.476-4.315,3.476C5.228,12.976,3,10.748,3,8c0-2.748,2.228-4.976,4.976-4.976c1.442,0,2.606,0.623,3.397,1.603L13.52,2.48C12.192,0.955,10.276,0,8,0C3.582,0,0,3.582,0,8s3.582,8,8,8s7.5-3.582,7.5-8V6.5H8",odnoklassniki:"8 2.6c.9 0 1.7.7 1.7 1.7C9.7 5.2 9 6 8 6c-.9 0-1.7-.7-1.7-1.7S7.1 2.6 8 2.6zm0 5.7c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4zm1.6 3.2c.8-.2 1.6-.5 2.3-1 .5-.3.7-1.1.4-1.6-.3-.6-1.1-.7-1.6-.4-1.6 1-3.8 1-5.4 0-.6-.3-1.3-.1-1.6.4-.4.6-.2 1.3.3 1.7.7.5 1.5.8 2.3 1l-2.2 2.2c-.5.5-.5 1.2 0 1.7.2.2.5.3.8.3.3 0 .6-.1.8-.3L8 13.2l2.2 2.2c.5.5 1.2.5 1.7 0s.5-1.2 0-1.7l-2.3-2.2",pocket:"12.533 6.864L8.77 10.4c-.213.2-.486.3-.76.3-.273 0-.547-.1-.76-.3L3.488 6.865c-.437-.41-.45-1.09-.032-1.52.42-.428 1.114-.443 1.55-.032l3.006 2.823 3.004-2.823c.438-.41 1.132-.396 1.55.032.42.43.406 1.11-.03 1.52zm3.388-4.928c-.207-.56-.755-.936-1.363-.936H1.45C.854 1 .31 1.368.096 1.917.032 2.08 0 2.25 0 2.422v4.73l.055.94c.232 2.14 1.366 4.01 3.12 5.314.03.024.063.047.094.07l.02.013c.94.673 1.992 1.13 3.128 1.353.524.104 1.06.157 1.592.157.492 0 .986-.045 1.472-.133.058-.01.116-.022.175-.034.016-.003.033-.01.05-.018 1.088-.233 2.098-.677 3.003-1.326l.02-.015c.032-.022.064-.045.096-.07 1.753-1.303 2.887-3.173 3.12-5.312l.054-.94v-4.73c0-.165-.02-.327-.08-.487",telegram:"12.4 4.2L6.6 9.6c-.2.2-.3.4-.4.7L6 11.8c0 .2-.3.2-.3 0l-.8-2.6c-.1-.4.1-.7.3-.8l7-4.3c.2-.2.4 0 .2.1zm2.9-3L.5 6.9c-.4.1-.4.7 0 .8L4.1 9l1.4 4.5c.1.3.4.4.7.2l2-1.6c.2-.2.5-.2.7 0l3.6 2.6c.3.2.6 0 .7-.3l2.6-12.8c.1-.2-.2-.5-.5-.4",whatsapp:"15.8 7.8c0 4.2-3.4 7.6-7.6 7.6-1.3 0-2.6-.3-3.7-.9L.3 15.8l1.4-4.1C1 10.6.6 9.2.6 7.8.6 3.6 4 .2 8.2.2c4.2 0 7.6 3.4 7.6 7.6M8.1 1.4c-3.5 0-6.4 2.9-6.4 6.4 0 1.4.5 2.7 1.2 3.7l-.8 2.4 2.5-.8c1 .7 2.2 1.1 3.5 1.1 3.5 0 6.4-2.9 6.4-6.4.1-3.5-2.8-6.4-6.4-6.4M12 9.5c0-.1-.2-.1-.4-.2s-1.1-.5-1.3-.6c-.2-.1-.3-.1-.4.1-.1.2-.4.6-.6.7-.1.1-.2.1-.4 0-.1 0-.8-.2-1.5-.8-.6-.5-.9-1.1-1-1.3-.1-.2 0-.3.1-.4l.3-.3c.1-.1.1-.2.2-.3 0-.2 0-.3-.1-.4 0-.1-.4-1-.6-1.4-.1-.3-.3-.2-.4-.2h-.4c-.1 0-.3 0-.5.2-.1.2-.6.6-.6 1.5s.7 1.8.8 1.9c.1.1 1.3 2.1 3.2 2.8 1.9.7 1.9.5 2.2.5.3 0 1.1-.4 1.3-.9.1-.4.1-.8.1-.9",viber:"13.7 6.7c0 .3.1.7-.3.8-.6.1-.5-.4-.5-.8-.4-2.3-1.2-3.2-3.5-3.7-.4-.1-.9 0-.8-.5.1-.5.5-.4.9-.3 2.3.3 4.2 2.3 4.2 4.5zM8.8 1.2c3.7.6 5.5 2.4 5.9 6.1 0 .3-.1.9.4.9s.4-.5.4-.9c0-3.6-3.1-6.8-6.7-7-.2.1-.8-.1-.8.5 0 .4.4.3.8.4zm5.7 10.2c-.5-.4-1-.7-1.5-1.1-1-.7-1.9-.7-2.6.4-.4.6-1 .6-1.6.4-1.7-.8-2.9-1.9-3.7-3.6-.3-.7-.3-1.4.5-1.9.4-.3.8-.6.8-1.2 0-.8-2-3.5-2.7-3.7-.3-.1-.6-.1-1 0C.9 1.2.2 2.7.9 4.4c2.1 5.2 5.8 8.8 11 11 .3.1.6.2.8.2 1.2 0 2.5-1.1 2.9-2.2.3-1-.5-1.5-1.1-2zM9.7 4c-.2 0-.5 0-.6.3-.1.4.2.5.5.5.9.2 1.4.7 1.5 1.7 0 .3.2.5.4.4.3 0 .4-.3.4-.6 0-1.1-1.2-2.3-2.2-2.3",email:"12.7 1c1 .5 1.8 1.2 2.3 2.2.5.9.8 1.9.8 3.1 0 .9-.1 1.8-.5 2.7-.3.9-.8 1.6-1.4 2.2-.6.6-1.4.9-2.3.9-.6 0-1.1-.2-1.5-.5-.4-.3-.6-.7-.7-1.2-.6 1.1-1.5 1.6-2.5 1.6-.8 0-1.5-.3-1.9-.8-.5-.6-.7-1.3-.7-2.2 0-.8.1-1.6.4-2.5S5.5 5 6.1 4.4c.7-.6 1.5-.8 2.6-.8.5 0 1 .1 1.4.2.5.1.9.3 1.3.6l-.7 4.9v.3c0 .2 0 .4.1.5.1.1.3.2.5.2.4 0 .8-.2 1.1-.7.3-.4.5-1 .7-1.6.1-.7.2-1.3.2-1.9 0-1.3-.4-2.3-1.1-3-.8-.7-1.9-1-3.4-1s-2.7.4-3.7 1.1c-.9.7-1.6 1.6-2 2.6S2.6 7.9 2.6 9c0 .9.2 1.8.6 2.5.4.7 1 1.3 1.7 1.7.7.4 1.7.6 2.7.6.5 0 1-.1 1.6-.2.6-.1 1.1-.3 1.5-.4l.4 1.9c-.6.2-1.2.4-1.8.5-.7.1-1.3.2-1.9.2-1.4 0-2.7-.3-3.8-.9s-1.9-1.4-2.5-2.4S.2 10.3.2 9c0-1.3.3-2.7 1-4 .6-1.4 1.6-2.5 3-3.4C5.5.7 7.2.2 9.2.2c1.3 0 2.5.3 3.5.8zm-4 8.4l.6-3.9c-.3-.1-.5-.2-.7-.2-.7 0-1.2.4-1.5 1.2-.3.8-.5 1.7-.5 2.6 0 .8.3 1.2.8 1.2s.9-.3 1.3-.9",more:"14.725 6.667H9.333V1.275C9.333.57 8.738 0 8 0S6.667.57 6.667 1.275v5.392H1.275C.57 6.667 0 7.262 0 8s.57 1.334 1.275 1.334h5.392v5.393C6.667 15.43 7.262 16 8 16s1.333-.57 1.333-1.273V9.334h5.392C15.43 9.334 16 8.738 16 8s-.57-1.333-1.275-1.333"}},{}],22:[function(t,e){var r={yes:!0,no:!1},s={each:function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},toArray:function(t){return Array.prototype.slice.call(t)},merge:function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];if(n)for(var i in n)t[i]=n[i]}return t},extend:function(t,e){for(var n in e)t[n]=e[n]},flexboxSupport:function(t,e){var n,i="flex",o="-webkit-"+i,r=document.createElement("b");try{r.style.display=o,r.style.display=i,n=r.style.display==i||r.style.display==o?i:"no-"+i}catch(r){n="no-"+i}t.className+=" "+e+"--"+n},getDataset:function(t){if("object"==typeof t.dataset)return t.dataset;var e,n,i={},o=t.attributes,r=function(t){return t.charAt(1).toUpperCase()};for(e=o.length-1;0<=e;e--)(n=o[e])&&n.name&&/^data-\w[\w\-]*$/.test(n.name)&&(i[n.name.substr(5).replace(/-./g,r)]=n.value);return i},bools:function(t){var e={},n=s.getDataset(t);for(var i in n){var o=n[i];e[i]=r[o]||o}return e},template:function(t,n){return t?t.replace(/\{([^\}]+)\}/g,function(t,e){return e in n?n[e]:t}):""},makeUrl:function(t,e){for(var n in e)e[n]=encodeURIComponent(e[n]);return s.template(t,e)},query:function(t){var e=encodeURIComponent,n=[];for(var i in t)"object"!=typeof t[i]&&n.push(e(i)+"="+e(t[i]));return n.join("&")},set:function(n,t,e){var i=t.split("."),o=null;i.forEach(function(t,e){void 0===n[t]&&(n[t]={}),e!==i.length-1&&(n=n[t]),o=t}),n[o]=e}};e.exports=s},{}],23:[function(t,e){function n(t,e){this.container=t,this.options=e,this.countersLeft=0,this.buttons=[],this.number=0,this.init()}var i=t("./button"),o=(t("./services"),t("./config")),r=t("./utils");n.prototype={init:function(){r.toArray(this.container.children).forEach(this.addButton.bind(this)),this.options.counters?(this.timer=setTimeout(this.appear.bind(this),this.options.wait),this.timeout=setTimeout(this.ready.bind(this),this.options.timeout)):this.appear(),r.flexboxSupport(this.container,o.name)},addButton:function(t){var e=new i(t,this,this.options);this.buttons.push(e),e.options.counterUrl&&this.countersLeft++},update:function(e){(e.forceUpdate||e.url!==this.options.url)&&(this.countersLeft=this.buttons.length,this.number=0,this.buttons.forEach(function(t){t.update(e)}))},updateCounter:function(t,e){e&&(this.number+=e),this.countersLeft--,0===this.countersLeft&&(this.appear(),this.ready())},appear:function(){this.container.classList.add(o.name+"--visible")},ready:function(){this.timeout&&(clearTimeout(this.timeout),this.container.classList.add(o.name+"--ready"))}},e.exports=n},{"./button":1,"./config":2,"./services":12,"./utils":22}]},{},[5]),function(){var t,e,n,i,o,r,s,a;s=["https://fonts.googleapis.com/css?family=Roboto+Condensed"],r=[],o=["images/bg.jpg","images/clouds.png","images/hovercraft_enemy.png","images/hovercraft_flame.png","images/hovercraft_main.png","images/hovercraft_trace.png","images/icon-word-wrong.png","images/intro-bg.jpg","images/logo-megafon.png","images/logo-tj.png","images/logo-x.png","images/rectangle.svg"],i=["images/final-bg.jpg","images/final-city.png","images/icon-back.png","images/icon-close-hover.png","images/icon-close.png","images/icon-fb-hover.png","images/icon-fb.png","images/icon-repeat-hover.png","images/icon-repeat.png","images/icon-trophy-black.png","images/icon-trophy.png","images/icon-tw-hover.png","images/icon-tw.png","images/icon-vk-hover.png","images/icon-vk.png"],n=["images/building_1_l1.png","images/building_2_l1.png","images/building_3_l1.png","images/building_4_l1.png","images/building_5_l1.png","images/building_6_l1.png","images/building_7_l1.png","images/building_8_l1.png"],t=["images/building_1_l2.png","images/building_2_l2.png","images/building_3_l2.png","images/building_4_l2.png","images/building_5_l2.png","images/building_6_l2.png","images/building_7_l2.png","images/building_8_l2.png"],e=[{family:"GTWalsheimPro",data:{weight:400}},{family:"GTWalsheimPro",data:{weight:500}},{family:"GTWalsheimPro",data:{weight:600}},{family:"GTWalsheimPro",data:{weight:900}},{family:"Roboto Condensed",data:{}}],a="game-klavogonki",document.getElementById(a),BL_Klavogonki.loaderConfig={targetId:a,styles:s,scripts:r,imagesRequired:o,imagesAdditional:i,foregroundBuildings:n,backgroundBuildings:t,fonts:e,filesCount:s.length+r.length+o.length+n.length+t.length+e.length}}.call(this),function(){var r,s,n,t,i,o,e,a,l,c,u,h,p,d,f,g,v,m,b,y,w,k,_,x,E,L,T,C,S,$,A,H,j;if(s=BL_Klavogonki,o=function(t){return"http"===t.slice(0,4)?t:""+s.baseDir+t},k=function(){var t,e,n,i,o;if(0===(m-=1)){for(r.innerHTML="",s.main(),o=[],e=0,n=(i=s.loaderConfig.imagesAdditional).length;e<n;e++)t=i[e],o.push(w(t));return o}},x=function(t){var e;return(e=document.createElement("link")).rel="stylesheet",e.type="text/css",e.href=o(t),e.onload=k,e.onerror=k,r.insertAdjacentElement("beforebegin",e)},_=function(t,e){var n;return(n=document.createElement("script")).src=o(t),n.onload=function(){if(k(),null!=e)return e()},n.onerror=k,n.async=!1,r.insertAdjacentElement("beforebegin",n)},a=[],w=function(t){var e;return(e=new Image).onload=k,e.onerror=k,e.src=o(t),a.push(e)},i=[],b=function(t){var e;return(e=new Image).onload=k,e.onerror=k,e.src=o(t),i.push(e)},n=[],v=function(t){var e;return(e=new Image).onload=k,e.onerror=k,e.src=o(t),n.push(e)},[],y=function(t){var e,n,i,o,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],o=new FontFaceObserver(e.family,e.data),r.push(o.load(null,1e4).then(k,k));return r},j=s.loaderConfig.targetId,r=document.getElementById(j)){for(m=s.loaderConfig.filesCount,s.baseDir=null!=(L=null!=(T=r.attributes["data-base"])?T.value:void 0)?L:"",s.parameters=r.attributes,s.loaderConfig.fonts&&y(s.loaderConfig.fonts),e=0,h=(C=s.loaderConfig.styles).length;e<h;e++)x(t=C[e]);for(l=0,p=(S=s.loaderConfig.scripts).length;l<p;l++)_(t=S[l]);for(c=0,d=($=s.loaderConfig.imagesRequired).length;c<d;c++)t=$[c],w(t);for(u=0,f=(A=s.loaderConfig.foregroundBuildings).length;u<f;u++)b(t=A[u]);for(E=0,g=(H=s.loaderConfig.backgroundBuildings).length;E<g;E++)v(t=H[E]);s.loaded={foregroundBuildings:i,backgroundBuildings:n}}else console.warn("Не удается найти элемент #"+j)}.call(this),function(){var i,o;(i=BL_Klavogonki).addZero=function(t,e){var n;for(null==e&&(e=2),n=String(t);n.length<e;)n="0"+n;return n},o=function(t,e){var n,i,o;if(null==e&&(e=""),t){for(n in i=[],t)o=t[n],i.push(n+"="+o);return e+i.join("&")}return""},i.ajaxGet=function(e,t,n){return i.warn("GET /"+e+" request",t),i.axios({method:"get",url:i.backend+e+o(t,"?"),withCredentials:!0}).then(function(t){if(i.log("GET /"+e+" response",t.data),n)return n(t.data,!0)}).catch(function(t){if(console.error("GET /"+e+" error",t),n)return n(t.data,!1)})},i.ajaxPost=function(e,t,n){return i.warn("POST /"+e+" request",t),i.axios({method:"post",url:i.backend+e,withCredentials:!0,data:o(t)}).then(function(t){if(i.log("POST /"+e+" response",t.data),n)return n(t.data,!0)}).catch(function(t){if(console.error("POST /"+e,t),n)return n(t.data,!1)})}}.call(this),function(){var i;i=BL_Klavogonki,i.Intro=function(){function t(t,e){var n;this.$place=t,this.$place.append('<div class="game-klavogonki-intro_logo _megafon"></div>\n<div class="game-klavogonki-intro_logo _x"></div>\n<div class="game-klavogonki-intro_logo _tj"></div>\n<div class="game-klavogonki-intro_info">\n\t<div class="game-klavogonki-intro_info-wrap">\n\t\t<div class="game-klavogonki-intro_header">Клавогонки<br>на&nbsp;TJournal</div>\n\t\t<div class="game-klavogonki-intro_text">Печатай текст как можно<br>быстрее, чтобы твой быстролёт<br>пришёл к финишу первым.</div>\n\t\t<div class="game-klavogonki-intro_start-button">Играть</div>\n\t</div>\n</div>\n<div class="game-klavogonki-intro_image"></div>'),i.$(".game-klavogonki-intro_start-button").click((n=this,function(){if(!n.clicked)return n.clicked=!0,setTimeout(function(){return n.clicked=!1},2e3),e()}))}return t.prototype.hide=function(){return this.$place.removeClass("_visible")},t.prototype.show=function(){return this.$place.addClass("_visible")},t}()}.call(this),function(){var s;s=BL_Klavogonki,s.AuthWindow=function(){function t(t,o){var r,e;this.$place=t,this.$place.append('<div class="game-klavogonki-login _game-klavogonki-popup _centered">\n\t<div class="game-klavogonki-login_close-button"></div>\n\t<div class="game-klavogonki-login_header">Авторизуйтесь,<br>чтобы начать игру</div>\n\t<div class="game-klavogonki-login_buttons">\n\t\t<div class="game-klavogonki-login_button _vk" data-url="/auth/vk">ВКонтакте</div>\n\t\t<div class="game-klavogonki-login_button _facebook" data-url="/auth/facebook">Facebook</div>\n\t\t<div class="game-klavogonki-login_button _twitter" data-url="/auth/twitter">Twitter</div>\n\t\t<div class="game-klavogonki-login_button _google" data-url="/auth/googleplus">Google</div>\n\t</div>\n</div>'),r=this,s.$(".game-klavogonki-login_close-button").click((e=this,function(){return e.hide()})),s.$(".game-klavogonki-login_button").click(function(){var t,e,n,i;return i=location.origin+s.$(this).attr("data-url"),t=screen.width/2-400,n=screen.height/2-285,localStorage.removeItem("logged_in"),window.open(i,"displayWindow","width=720,height=600,left="+t+",top="+n+",location=no,directories=no,status=no,toolbar=no,menubar=no"),e=function(t){var e;if(s.log(t),("logged_in"===(e=t.key)||"auth_error"===e)&&(1===parseInt(localStorage.getItem("logged_in"))&&(localStorage.removeItem("logged_in"),o&&o()),localStorage.auth_error))return console.error("Auth error",localStorage.auth_error),localStorage.removeItem("auth_error")},window.addEventListener("storage",e,!1),r.hide()})}return t.prototype.show=function(){return this.$place.addClass("_visible")},t.prototype.hide=function(){return this.$place.removeClass("_visible")},t}()}.call(this),function(){var T;T=BL_Klavogonki,T.Leaderboard=function(){function t(t){var e;this.$place=t,this.$place.html('<div class="game-klavogonki-leaderboard_wrap">\n\t<div class="game-klavogonki-leaderboard_close-button"></div>\n\t<div class="game-klavogonki-leaderboard_header">\n\t\t<div class="game-klavogonki-leaderboard_header-text">Турнирная таблица</div>\n\t\t<div class="game-klavogonki-leaderboard_header-back-button">\n\t\t\t<div class="game-klavogonki-leaderboard_header-back-button-icon"></div>\n\t\t\tВернуться\n\t\t</div>\n\t</div>\n\t<table>\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<td>#</td>\n\t\t\t\t<td>Имя</td>\n\t\t\t\t<td>Скорость</td>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody class="game-klavogonki-leaderboard_data">\n\t\t</tbody>\n\t</table>\n\t<div class="game-klavogonki-leaderboard_pagination-indicator">\n\t\t<div class="game-klavogonki-leaderboard_pagination-indicator-highlight"></div>\n\t</div>\n\t<div class="game-klavogonki-leaderboard_pagination"></div>\n</div>'),this.position=-1,this.$place.find(".game-klavogonki-leaderboard_close-button, .game-klavogonki-leaderboard_header-back-button").click((e=this,function(){return e.hide()}))}return t.prototype.show=function(t){return null!=t&&(this.position=t),this.$place.addClass("_visible"),this.requestLeaderboard(Math.ceil(this.position/10))},t.prototype.hide=function(){return this.$place.removeClass("_visible")},t.prototype.renderLeaderboard=function(t,e,n,i){var o,r,s,a,l,c,u,h,p,d,f,g,v,m,b,y,w,k,_,x,E,L;for(L="",s=l=0,h=(E=e).length;l<h;s=++l)L+="<tr "+((x=E[s]).place===this.position?"class='_active'":"")+"> <td>"+x.place+"</td> <td>"+x.user.name+"</td> <td>"+Math.round(x.speed)+" з/с</td> </tr>";if(T.$(".game-klavogonki-leaderboard_data").html(L),v="",(g=Math.ceil(n/10))<=2*(r=460<T.$root.width()?3:360<T.$root.width()?2:1)+4)for(f=c=1,m=g;1<=m?c<=m:m<=c;f=1<=m?++c:--c)v+="<span class='game-klavogonki-leaderboard_page "+(o=f===t?"_active":"")+"'>"+f+"</span>";else if(t<=r+2){for(f=u=1,b=2*r+2;1<=b?u<=b:b<=u;f=1<=b?++u:--u)v+="<span class='game-klavogonki-leaderboard_page "+(o=f===t?"_active":"")+"'>"+f+"</span>";v+="&nbsp;...&nbsp;<span class='game-klavogonki-leaderboard_page "+o+"'>"+g+"</span>"}else if(g-r-1<=t)for(v+="<span class='game-klavogonki-leaderboard_page "+o+"'>1</span>&nbsp;...&nbsp;",f=p=y=g-2*r-1,w=g;y<=w?p<=w:w<=p;f=y<=w?++p:--p)v+="<span class='game-klavogonki-leaderboard_page "+(o=f===t?"_active":"")+"'>"+f+"</span>";else{for(v+="<span class='game-klavogonki-leaderboard_page "+o+"'>1</span>&nbsp;...&nbsp;",f=d=k=t-r,_=t+r;k<=_?d<=_:_<=d;f=k<=_?++d:--d)v+="<span class='game-klavogonki-leaderboard_page "+(o=f===t?"_active":"")+"'>"+f+"</span>";v+="&nbsp;...&nbsp;<span class='game-klavogonki-leaderboard_page "+o+"'>"+g+"</span>"}if(T.$(".game-klavogonki-leaderboard_pagination").html(v),T.$(".game-klavogonki-leaderboard_pagination-indicator-highlight").css({left:(t-1)/g*100+"%",right:(g-t)/g*100+"%"}),a=this,T.$(".game-klavogonki-leaderboard_page").click(function(){return t=parseInt(T.$(this).html()),a.requestLeaderboard(t)}),i)return i()},t.prototype.requestLeaderboard=function(t,e,i){return T.ajaxGet("leaderboard",{page:t},(o=this,function(t,e){var n;if(e)return n=t.response.leaderboard||[],200===t.status_code?o.renderLeaderboard(t.response.page,n,10*(t.response.leaderboard_pages_count||1),i):void 0}));var o},t}()}.call(this),function(){var a;a=BL_Klavogonki,a.Final=function(){function t(t,e,n){this.game=t,this.$place=e,this.onDone=n}return t.prototype.show=function(t,e,n){var i,o,r,s;return this.$place.html('<div class="game-klavogonki-final_wrap">\n\t<div class="game-klavogonki-final_city"></div>\n\t<div class="game-klavogonki-final_content">\n\t\t<div class="game-klavogonki-final_speed">\n\t\t\t<span class="game-klavogonki-final_speed-value"></span>\n\t\t\t<span class="game-klavogonki-final_speed-units">знаков<br>в секунду</span>\n\t\t</div>\n\t\t<div class="game-klavogonki-final_speed-compare">\n\t\t\t<span class="_game-klavogonki_desktop-only">Ты быстрее,</span>\n\t\t\t<span class="_game-klavogonki_mobile-only">Быстрее,</span>\n\t\t\tчем <span class="game-klavogonki-final_speed-compare-value"></span>% читателей TJournal!\n\t\t</div>\n\t\t<div class="game-klavogonki-final_buttons likely likely--custom">\n\t\t\t<span data-social="facebook" class="game-klavogonki-final_button facebook"></span>\n\t\t\t<span data-social="vkontakte" class="game-klavogonki-final_button vkontakte"></span>\n\t\t\t<span data-social="twitter" class="game-klavogonki-final_button twitter"></span>\n\t\t\t<span class="game-klavogonki-final_button _repeat"></span>\n\t\t</div>\n\t\t<div class="game-klavogonki-final_leaderboard"><span>Турнирная таблица</span>.</div>\n\t</div>\n\t<div class="game-klavogonki-final_megafon-block">\n\t\t<div class="game-klavogonki-final_megafon-big">\n\t\t\t<span>С МегаФоном</span> твой интернет всегда<br> будет самым быстрым.\n\t\t</div>\n\t\t<div class="game-klavogonki-final_megafon-small">\n\t\t\tПодтверждено замерами миллионов пользователей в&nbsp;Speedtest.\n\t\t</div>\n\t\t<a href="https://megafon.ru" class="game-klavogonki-final_megafon-link">Включайся!</a>\n\t\t<div class="game-klavogonki-final_megafon-logo"></div>\n\t</div>\n</div>'),this.$place.find("._repeat").click((r=this,function(){return r.game.showInterface(),r.onDone()})),this.$place.find(".game-klavogonki-final_leaderboard").click((s=this,function(){return s.game.leaderboard.show(s.position)})),this.$place.addClass("_visible"),this.$place.find(".game-klavogonki-final_speed-value").html(t),this.$place.find(".game-klavogonki-final_speed-compare-value").html(e),this.position=n,o=a.$root.attr("data-share-url"),i=a.$root.attr("data-share-title"),a.$(".game-klavogonki-final_buttons").attr("data-url",o+t),a.$(".game-klavogonki-final_buttons").attr("data-title",i),window.likely&&window.likely.initiate(),this.game.hideInterface()},t.prototype.hide=function(){return this.$place.removeClass("_visible")},t}()}.call(this),function(){var v,m,e=function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;m=BL_Klavogonki,v=m.$,m.Background=function(t,e,n){this.place=t,this.speed=e,this.layer=n},m.Buildings=function(t){var p,d,f;function g(t,e){var n,i,o,r,s,a,l,c,u,h;for(this.speed=t,this.layer=e,this.place=v(f),l=-1,r=0,h=1===this.layer?p:2*p;0<=h?r<h:h<r;0<=h?++r:--r)o=(n=1===this.layer?m.loaded.foregroundBuildings:m.loaded.backgroundBuildings)[l=-1===l?Math.floor(Math.random()*n.length):((c=Math.floor(Math.random()*(n.length-1)))+(l<=c))%n.length],s=Math.pow(-1,1+Math.round(Math.random()))*Math.random()*d,a=-1^(1+Math.floor(Math.random()))*Math.random()*d,u=-12+Math.round(10*Math.random()),i=v(o).clone().css({height:"calc("+u+"% + "+(1===this.layer?"100%":"75%")+")",marginRight:a+"px",marginLeft:s+"px",zIndex:Math.floor(2*Math.random()),position:"relative",objectFit:"contain"}),this.place.append(i);this.place.css({"z-index":-this.layer}),g.__super__.constructor.call(this,this.place,this.speed,this.layer)}return e(g,t),p=200,d=150,f='<div class="game-klavogonki-visualization_town-background-buildings" width="0" height="0"> </div>',g}(m.Background),m.Clouds=function(t){var n;function i(t,e){this.speed=t,this.layer=e,i.__super__.constructor.call(this,v(n),this.speed,this.layer),this.place.css({bottom:15*this.layer-Math.pow(2,this.layer)/2-50+"px"}),this.place.css({"z-index":-this.layer})}return e(i,t),n='<div class="game-klavogonki-visualization_town-background-clouds"> </div>',i}(m.Background)}.call(this),function(){var e,t;t=BL_Klavogonki,e=t.$,t.Ship=function(){function t(){this.place=e('<div class="game-klavogonki-visualization_ship-container"> <div class="game-klavogonki-visualization_ship-dash"> <div class="game-klavogonki-visualization_ship-dash-start"></div> <div class="game-klavogonki-visualization_ship"> <div class="game-klavogonki-visualization_ship-name"><span></span></div> <div class="game-klavogonki-visualization_ship-air"></div> <div class="game-klavogonki-visualization_ship-flame"></div> <div class="game-klavogonki-visualization_ship-img"></div> </div> </div> </div>'),this.label=this.place.find(".game-klavogonki-visualization_ship-name").find("span")[0],this.image=this.place.find(".game-klavogonki-visualization_ship-img"),this.dash=this.place.find(".game-klavogonki-visualization_ship-dash"),this.progress=0,this.speed=0,this.position=0,this.main=!1,this.bindEventHandlers()}return'<div class="game-klavogonki-visualization_ship-container"> <div class="game-klavogonki-visualization_ship-dash"> <div class="game-klavogonki-visualization_ship-dash-start"></div> <div class="game-klavogonki-visualization_ship"> <div class="game-klavogonki-visualization_ship-name"><span></span></div> <div class="game-klavogonki-visualization_ship-air"></div> <div class="game-klavogonki-visualization_ship-flame"></div> <div class="game-klavogonki-visualization_ship-img"></div> </div> </div> </div>',0,.84,t.prototype.bindEventHandlers=function(){},t.prototype.setLabel=function(t){return this.label.innerText=t},t.prototype.setProgress=function(t,e){return this.progress=t,this.position=0+.84*t,this.dash.css("padding-left",e*this.position-75+"px"),this.setBoost(),this.setFlying()},t.prototype.setFlying=function(){return this.place.addClass("_flying"),setTimeout((t=this,function(){return t.place.removeClass("_flying")}),300);var t},t.prototype.setBoost=function(){return this.place.addClass("_boosted"),setTimeout((t=this,function(){return t.place.removeClass("_boosted")}),300);var t},t.prototype.setMain=function(t){return this.main=t,this.place.toggleClass("game-klavogonki-visualization_ship_main",t)},t}()}.call(this),function(){var r,s;s=BL_Klavogonki,r=s.$,s.Town=function(){function t(t){var e,n,i,o;for(this.view=t,this.place=r('<div class="game-klavogonki-visualization_town game-klavogonki-visualization_town_started"> <div class="game-klavogonki-visualization_town-background"></div> <div class="game-klavogonki-visualization_town-ships _interface"></div> </div>'),this.ships=this.place.find(".game-klavogonki-visualization_town-ships"),this.background=this.place.find(".game-klavogonki-visualization_town-background"),this.bgLayers=[new s.Clouds(.7,0),new s.Buildings(.6,1),new s.Clouds(.5,2),new s.Buildings(.4,3),new s.Clouds(.3,4)],e=0,i=(o=this.bgLayers).length;e<i;e++)n=o[e],this.background.append(n.place)}return'<div class="game-klavogonki-visualization_town game-klavogonki-visualization_town_started"> <div class="game-klavogonki-visualization_town-background"></div> <div class="game-klavogonki-visualization_town-ships _interface"></div> </div>',t.prototype.addShip=function(t){return this.ships.append(t.place)},t.prototype.updateView=function(t){var e,n,i,o,r,s,a,l,c;for(c=(l=(r=this.place[0].offsetWidth)*t+.05*(e=this.view[0].offsetWidth/2))<=e?0:r-l<e?(this.place.removeClass("game-klavogonki-visualization_town_started"),this.place.addClass("game-klavogonki-visualization_town_finished"),r-2*e):l-e,this.place.css("left",-c+"px"),a=[],n=0,o=(s=this.bgLayers).length;n<o;n++)i=s[n],a.push(i.place.css("left",c*(1-i.speed)+"px"));return a},t}()}.call(this),function(){var t;t=BL_Klavogonki,t.Typing=function(){function t(t){this.$place=t,this.$place.html('<div class="game-klavogonki-typing_text-wrapper"> <div class="game-klavogonki-typing_text-window"> <div class="game-klavogonki-typing_text"> </div> </div> </div> <div class="game-klavogonki-typing_input-wrapper"> <div class="game-klavogonki-typing_input-window"> <input class="game-klavogonki-typing_input" autocapitalize="none" spellcheck="false" type="text"> <div class="game-klavogonki-typing_speed"> <span class="game-klavogonki-typing_speed-value">0</span> знаков/сек</span> </div> </div> </div>'),this.$input=this.$place.find(".game-klavogonki-typing_input"),this.bindEventHandlers()}return t.prototype.bindEventHandlers=function(){return this.$input.on("input",(r=this,function(){var t,e,n,i,o;return o=r.$input.val()||"",e=r.typingPosition<r.text.length-1?" ":"",i=r.currentWord+e,n=o.replace(/[[\]{}()*+?.,\\^$|#]/g,"\\$&").replace(/[\u2014\u2013\u2212\u002d]/g,"[-—]").replace(/"/g,'["«»]'),new RegExp("^"+n+"$").test(i)?(r.$input.val(""),r.$input.parent().removeClass("_error"),r.onWordDone&&r.onWordDone(r.typingPosition,r.errors),r.setCurrentWord(1)):(t=!new RegExp("^"+n).test(i),r.$input.parent().toggleClass("_error",t),t&&!r.wasError&&(r.errors+=1),r.wasError=t)}));var r},t.prototype.setText=function(t){var e,n,i,o,r;for(this.text=t.split(" "),e=0,this.lengths=[],n=0,i=(o=this.text).length;n<i;n++)e+=o[n].length+1,this.lengths.push(e);return this.length=e,this.renderText(),this.setCurrentWord(0,!0),setTimeout((r=this,function(){return r.$input[0].focus()}))},t.prototype.updateSpeed=function(t){return this.$place.find(".game-klavogonki-typing_speed-value").html(Math.round(t))},t.prototype.renderText=function(){var t,e,n,i;for(i="",t=0,e=(n=this.text).length;t<e;t++)i+="<span>"+n[t]+"</span> ";return this.$place.find(".game-klavogonki-typing_text").html(i)},t.prototype.setCurrentWord=function(t,e){var n;return this.wasError=!1,this.errors=0,e?this.typingPosition=t:this.typingPosition+=t,this.typingPosition>=this.text.length&&(this.typingPosition=this.text.length-1),this.currentWord=this.text[this.typingPosition],n=this.$place.find(".game-klavogonki-typing_text span").eq(this.typingPosition),this.$place.find("._active").removeClass("_active"),n.addClass("_active"),this.$place.find(".game-klavogonki-typing_text").css({left:-n[0].offsetLeft+"px"})},t.prototype.getProgressForPosition=function(t){return(this.lengths[t-1]||this.length)/this.length},t.prototype.hideText=function(){return this.hidden=!0,this.$place.find(".game-klavogonki-typing_text").addClass("_hidden")},t.prototype.showText=function(){if(this.hidden)return this.hidden=!1,this.$place.find(".game-klavogonki-typing_text").removeClass("_hidden")},t}()}.call(this),function(){var e,n;n=BL_Klavogonki,e=n.$,n.Visualization=function(){function t(t){this.place=t,this.place.empty(),this.town=new n.Town(this.place),this.place.append(this.town.place),this.ships=[],this.mainShipIndex=-1,this.bindEventHandlers()}return t.prototype.bindEventHandlers=function(){return console.log("resize"),e(window).on("resize",(r=this,function(){var t,e,n,i,o;for(i=[],t=0,e=(n=r.ships).length;t<e;t++)(o=n[t]).main?i.push(r.town.updateView(o.position)):i.push(void 0);return i}));var r},t.prototype.setMainShipIndex=function(t){if(!(t<0))return void 0!==this.ships[this.mainShipIndex]&&this.ships[this.mainShipIndex].setMain(!1),void 0!==this.ships[t]?(this.mainShipIndex=t,this.ships[this.mainShipIndex].setMain(!0)):void 0},t.prototype.setProgress=function(t,e){var n;if(n=this.ships[t])return n.setProgress(e,parseFloat(this.town.place[0].offsetWidth)),n.main?this.town.updateView(n.position):void 0},t.prototype.addShip=function(t){var e;if(t)return(e=new n.Ship).setLabel(t),this.town.addShip(e),this.ships.push(e),this.ships.length-1},t}()}.call(this),function(){var t,n=function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;(t=BL_Klavogonki).Player=function(){function t(t){this.game=t.game,this.userData=t.userData,this.rocketIndex=this.game.visualizationZone.addShip(this.userData.name),this.position=0}return t.prototype.updateUserData=function(){return this.game.visualizationZone.ships[this.rocketIndex].setLabel(this.userData.name)},t.prototype.updatePosition=function(t){return t&&(this.position=t),this.game.visualizationZone.setProgress(this.rocketIndex,this.game.typingZone.getProgressForPosition(this.position))},t}(),t.PlayerGhost=function(t){function e(t){this.startTime=1e3*t.startTime,this.setPath(t.path),e.__super__.constructor.call(this,t),this.setUpdater()}return n(e,t),e.prototype.setPath=function(t){var e,n,i,o,r;for(r=[],n=e=0,i=(this.path=t).length;n<i;n++)e+=1e3*(o=t[n]).seconds,r.push(o.cumulativeTime=e);return r},e.prototype.setUpdater=function(){var t,e;return e=this,t=function(){if((new Date).getTime()-e.startTime>e.path[0].cumulativeTime&&(e.position+=1,e.updatePosition(),e.path.shift()),e.path.length)return requestAnimationFrame(t)},requestAnimationFrame(t)},e}(t.Player),t.PlayerLocal=function(t){function e(t){e.__super__.constructor.call(this,t),this.game.visualizationZone.setMainShipIndex(this.rocketIndex)}return n(e,t),e.prototype.updatePosition=function(t){if(e.__super__.updatePosition.call(this,t),t>=this.game.typingZone.text.length)return this.game.typingZone.onTextDone()},e}(t.Player)}.call(this),function(){var c;c=BL_Klavogonki,c.$root=c.$("#game-klavogonki"),c.backend=c.$root.attr("data-backend"),c.KlavogonkiGame=function(){function t(){var n,t;c.$root.append('<div class="game-klavogonki-main  game-klavogonki-screen _visible"> <div class="game-klavogonki-visualization"></div> <div class="game-klavogonki-typing _interface"></div> <div class="game-klavogonki-timer _interface">00:00:00</div> <div class="game-klavogonki-logo _megafon _interface"></div> <div class="game-klavogonki-logo _tj _interface"></div> </div> <div class="game-klavogonki-intro game-klavogonki-screen _visible"></div> <div class="game-klavogonki-final game-klavogonki-screen"></div> <div class="game-klavogonki-leaderboard game-klavogonki-screen"></div> <div class="game-klavogonki-auth-window game-klavogonki-screen"></div>'),this.authWindow=new c.AuthWindow(c.$(".game-klavogonki-auth-window"),function(){return window.location.reload()}),this.intro=new c.Intro(c.$(".game-klavogonki-intro"),(n=this,function(){return c.log(window.authToken),window.authToken?(c.authToken=window.authToken,c.ajaxPost("auth",{token:c.authToken},function(t,e){if(e)return n.switchToGame(),n.intro.hide()})):n.authWindow.show()})),this.final=new c.Final(this,c.$(".game-klavogonki-final"),(t=this,function(){return t.final.hide(),t.switchToGame()})),this.leaderboard=new c.Leaderboard(c.$(".game-klavogonki-leaderboard")),this.intro.show()}return t.prototype.switchToGame=function(){var n,t;return this.typingZone=new c.Typing(c.$(".game-klavogonki-typing")),this.typingZone.onWordDone=(n=this,function(t,e){return n.sendProgress(t,e)}),this.typingZone.onTextDone=(t=this,function(){return t.sendFinal()}),this.visualizationZone=new c.Visualization(c.$(".game-klavogonki-visualization")),this.start()},t.prototype.start=function(){return setTimeout((t=this,function(){return t.setText()}),0);var t},t.prototype.setText=function(){return c.ajaxPost("run",null,(l=this,function(t,e){var n,i,o,r,s,a;if(e){for(l.typingZone.hideText(),l.typingZone.setText(t.response.round.text.text),l.ghosts=[],o=r=0,s=(a=t.response.ghosts).length;r<s;o=++r)(i=a[o]).packets&&(n=new c.PlayerGhost({game:l,userData:i.user,path:i.packets,startTime:t.response.round.start_time}),l.ghosts.push(n));return l.player=new c.PlayerLocal({game:l,rocketIndex:3,userData:t.response.round.user,textLength:l.typingZone.textLength}),l.roundId=t.response.round.id,l.startTime=(new Date).getTime(),l.startTimer()}}));var l},t.prototype.sendProgress=function(t,e){var n,i;return n={round_id:this.roundId,position:t,errors:e},c.ajaxPost("packet",n,(i=this,function(t,e){return i.player.updatePosition(t.response.round.packets.length),i.typingZone.updateSpeed(t.response.speed)}))},t.prototype.sendFinal=function(){var t,i;return t={round_id:this.roundId},c.ajaxPost("final",t,(i=this,function(t,e){var n;if(e)return i.typingZone.updateSpeed(t.response.speed),i.timerStop=!0,100<(n=t.response.better_than)&&(n=100),n<0&&(n=0),setTimeout(function(){return i.final.show(Math.round(t.response.speed),n,t.response.position)},4e3)}))},t.prototype.startTimer=function(){var o,r,s;return o=(new Date).getTime(),s=this,r=function(){var t,e,n,i;if(!((new Date).getTime()-o<32))return 0<(i=(o=(new Date).getTime())-s.startTime)&&s.typingZone.showText(),e=Math.max(Math.floor(i/6e4),0),n=Math.max(Math.floor(i%6e4/1e3),0),t=Math.max(Math.floor(i%1e3/10),0),c.$(".game-klavogonki-timer").html(c.addZero(e)+":"+c.addZero(n)+":"+c.addZero(t)),s.timerStop||c.timerStop?s.timerStop=!1:requestAnimationFrame(r);requestAnimationFrame(r)},requestAnimationFrame(r)},t.prototype.hideInterface=function(){return c.log(c.$root.find("._interface")),c.$root.find("._interface").addClass("_hidden")},t.prototype.showInterface=function(){return c.$root.find("._interface").removeClass("_hidden")},t}(),c.main=function(){return new c.KlavogonkiGame}}.call(this);